<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <title>YAT.js - Table that is converted to a timeline</title>

  <link href="http://bmg.gv.at/cms/home/css/style.css" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="../css/layouts/bmg.css"/>

  <script type="text/javascript" src="../js/libs/modernizr.custom.js"></script>
  <script type="text/javascript" src="../js/libs/jquery.min.js"></script>
  <script type="text/javascript" src="../js/libs/underscore-min.js"></script>
  <script type="text/javascript" src="../js/libs/backbone-min.js"></script>
  <script type="text/javascript" src="../js/libs/jquery.event.scroll.js"></script>
  <script type="text/javascript" src="../js/libs/jquery.ba-resize.min.js"></script>
  <script type="text/javascript" src="../js/libs/hammer.js"></script>
  <script type="text/javascript" src="../js/libs/moment.js"></script>
  <script type="text/javascript" src="../js/coffee/wrapper/yat.js"></script>
  <script type="text/javascript" src="../js/coffee/backbone/models/navigationViewManager.js"></script>
  <script type="text/javascript" src="../js/coffee/backbone/views/templates.js"></script>
  <script type="text/javascript" src="../js/coffee/backbone/views/overviewView.js"></script>
  <script type="text/javascript" src="../js/coffee/backbone/views/viewportItemView.js"></script>
  <script type="text/javascript" src="../js/coffee/backbone/views/viewportView.js"></script>
  <script type="text/javascript" src="../js/coffee/backbone/views/navigationElementView.js"></script>
  <script type="text/javascript" src="../js/coffee/backbone/views/navigationView.js"></script>
  <script type="text/javascript" src="../js/coffee/backbone/views/timelineView.js"></script>
  <script type="text/javascript" src="../js/coffee/backbone/models/item.js"></script>
  <script type="text/javascript" src="../js/coffee/backbone/collections/items.js"></script>
  <script type="text/javascript" src="../js/coffee/backbone/app.js"></script-->
  <script type="text/javascript" src="../js/coffee/backbone/collections/items.js"></script>
  <!--script type="text/javascript" src="../yat.js"></script-->

</head>
<body>

<div class="page-content">
    <div class="page-main full" style="width:80.243em; padding: 0">

      <div style="display: none;">
    <h1>Example of a table that may be converted to a timeline by YAT.js</h1>

    <ul id="yat-table1-skipmenu">
      <li><a href="#yat-table1-skiptarget">Tabelle überspringen</a></li>
      <li><a href="#yat-table1-filters">Zu Filtermöglichkeiten der Tabelle springen</a></li>
      <li><a href="#yat-table1-target1">In der Tabelle zum 1. Jänner 2010 springen</a></li>
      <li><a href="#yat-table1-target2">In der Tabelle zum 1. Jänner 2011 springen</a></li>
      <li><a href="#yat-table1-target3">In der Tabelle zum 1. Jänner 2012 springen</a></li>
    </ul>

    <form id="yat-table1-filters" action="" method="post">
      <fieldset>
        <legend>Filter</legend>
        <label for="yat-table1-filters-category">Kategorie</label>
        <select id="yat-table1-filters-category">
          <option>Keine Kategorie gewählt</option>
          <option>Allgemein</option>
          <option>Speziell</option>
        </select>
        <label for="yat-table1-filters-tags" lang="en">Tags</label>
        <select id="yat-table1-filters-tags" multiple="multiple">
          <option>Eingetragen</option>
          <option>Tag2</option>
          <option>Tag3</option>
        </select>
        <input type="submit" value="Filtern"/>
      </fieldset>
    </form>
      </div>

    <div class="tbl_jobs tbl1">
<table summary="Enthält historische Ereignisse, die als Zeitleiste aufbereitet werden." class="yat-timeline" id="yat-table1">
<caption>Es wurden <span id="numDocs"></span> Ereignisse gefunden.
  <a href="#yat-table1-skipmenu">Zum Sprungmenü</a>
</caption>
<thead>
<tr>
  <th>Termin</th>
  <th>Titel</th>
  <th>Inhalt</th>
  <th>Kategorie</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
</div>

    <div id="yat-table1-timeline"></div>
    <div id="yat-table1-skiptarget"></div>

  </div>
</div>

<script type="text/template" id="rowTemplate">
  <tr>
    <th class="yat-date">2012-02-15</th>
    <td class="yat-title">Lorem Ipsum dolor sit amet</td>
    <td class="yat-content">
      <h3>Der Titel des letzten Eintrags 2012</h3>
    </td>
    <td class="yat-category">Allgemein</td>
    <td class="yat-tags">Eingetragen</td>
  </tr>
</script>
<script type="text/javascript">

//  var i,
//      table = $('#yat-table1 tbody'),
//      templateHtml = $('#rowTemplate').text();
//  for (i = 0; i < 500; i++) {
//    table.append(templateHtml);
//  }

  $(document).ready(function () {
    /*var date = moment('1970-01-01');
    _.times(50, function(){
      $("#yat-table1").append($("#yat-table1").children().last().clone());
    });

    $("#yat-table1").find('th.yat-date').each(function(i, el) {
      curDate = moment(el.innerHTML);
      //console.log(curDate.diff(date, 'days'));
      if(curDate.diff(date, 'days') < 0) {
        curDate = date.add('days', 1);
        el.innerHTML = curDate.format('YYYY-MM-DD');
        $(el).parent().find('.datetime').text(curDate.format('YYYY-MM-DD'));
      }
      date = curDate;
    })

    //alert("start doing the timeline dance.");
    */

    $.ajax({
      url: "testcontent1.txt",
      success: function(content){
        $("#yat-table1 tbody").html(content);

        $("#yat-table1").yat(
        {
          items:"tbody tr",
          category:"td.yat-category",
          content:"td.yat-content",
          date:"td.yat-date",
          shorttitle:"td.yat-title",
          tags:"td.yat-tags",
          important:"tr"
        },
        "#yat-table1-timeline",
        {
          alterImportant:function (element) {
            return element.hasClass("important");
        }
      });
      }
    });
  });
</script>


</body>
</html>
