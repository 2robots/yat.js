<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>YAT.js - Table that is converted to a timeline</title>

    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="../js/yat.js"></script>

    <link href="http://bmg.gv.at/cms/home/css/style.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../css/layouts/bmg.css">

</head>
<body>

<div class="page-content">
    <div class="page-main full" style="width:80.243em; padding: 0">
        <h1>Example of generated timeline</h1>


        <div class="yat-timeline">
            <div class="yat-timeline-inner1">
                <div class="yat-navigation">
                    <div class="yat-timeline-overview">
                        <ol class="yat-years">
                            <li style="width:20%;"><span>2009</span></li>
                            <li style="width:20%;"><span>2010</span></li>
                            <li style="width:20%;"><span>2011</span></li>
                            <li style="width:20%;"><span>2012</span></li>
                            <li class="last" style="width:20%;"><span>2013</span></li>
                        </ol>
                        <div class="yat-current-position">Aktueller Ausschnitt</div>
                    </div><!-- .yat-timeline-overview ends here -->

                    <div class="yat-inner">
                        <ol class="yat-elements">
                            <li><a href="#yat-timeline1-target1">ÄsthOP-Gesetz</a></li>
                            <li><a href="#yat-timeline1-target2">Rahmengesundheitsziele beschlossen</a></li>
                            <li><a href="#yat-timeline1-target3">Bundestierschutzpreis</a></li>
                            <li><a href="#yat-timeline1-target4">Rahmengesundheitsziele beschlossen</a></li>
                            <li><a href="#yat-timeline1-target5">"Schmatz Mampf Schlürf" - Ausstellung des ZOOM Kindermuseums</a></li>
                            <li><a href="#yat-timeline1-target6">Die neue österreichische Ernährungspyramide</a></li>
                            <li><a href="#yat-timeline1-target7">PK Ernährungskampagne ERNÄHRUNG KANN WAS</a></li>
                        </ol><!-- .yat-elements ends here -->
                    </div><!-- .yat-inner ends here -->

                    <div class="yat-navlinks">
                        <span class="yat-left">
                            <a href="javascript:void(0);">Nach links navigieren</a>
                        </span>

                        <span class="yat-right">
                            <a href="javascript:void(0);">Nach rechts navigieren</a>
                        </span>
                    </div><!-- .yat-navlinks ends here -->

                </div><!-- .yat-navigation ends here -->

                <div class="yat-viewport">
                    <div class="yat-inner">
                        <ol class="yat-elements">
                            <li id="yat-timeline1-target1">
                                <div class="yat-element-inner">
                                    <h3>ÄsthOP-Gesetz</h3>
                                    <span class="datetime">19.07.2012</span>
                                    <p><img src="http://www.bmg.gv.at/cms/home/attachments//0/5/7/CH1004/CMS1352825307110/operation_esunghee_sxc_hu_mittel.jpg" style="width:100%; height: auto;" />Das Bundesgesetz  für strengere Regeln bei Schönheitsoperationen. </p>
                                    <div class="detail">
                                        <span><a href="" class="link_intern">Mehr erfahren</a></span>
                                    </div>
                                </div>
                                <span class="arrow"></span>
                            </li>

                            <li class="important" id="yat-timeline1-target2">
                                <div class="yat-element-inner">
                                    <h3>ÄsthOP-Gesetz</h3>
                                    <span class="datetime">19.07.2012</span>
                                    <p><img src="http://www.bmg.gv.at/cms/home/attachments//0/5/7/CH1004/CMS1352825307110/operation_esunghee_sxc_hu_mittel.jpg" style="width:240px; height: auto; float: left; margin-right: 10px; margin-bottom: 10px" />Das Bundesgesetz  für strengere Regeln bei Schönheitsoperationen wurde am 19.07.2012 im Bundesrat einstimmig beschlossen. Das Gesetz dient dem Schutz von Patientinnen und Patienten, optimiert die Qualitätssicherung und soll am 1. Jänner 2013 in Kraft treten.</p>
                                    <p>Das Bundesgesetz  für strengere Regeln bei Scl am 1. Jänner 2013 in Kraft treten.</p>
                                    <div class="detail">
                                        <span><a href="" class="link_intern">Mehr erfahren</a></span>
                                    </div>
                                </div>
                                <span class="arrow"></span>
                            </li>

                            <li>
                                <div class="yat-element-inner">
                                    <h3>ÄsthOP-Gesetz</h3>
                                    <span class="datetime">19.07.2012</span>
                                    <p>Das Bundesgesetz  für strengere Regeln bei Schönheitsoperationen wurde am 19.07.2012 im Bundesrat einstimmig beschlossen. Das Gesetz dient dem Schutz von Patientinnen und Patienten, optimiert die Qualitätssicherung und soll am 1. Jänner 2013 in Kraft treten.</p>
                                    <div class="detail">
                                        <span><a href="" class="link_intern">Mehr erfahren</a></span>
                                    </div>
                                </div>
                                <span class="arrow"></span>
                            </li>
                        </ol><!-- .yat-elements ends here -->
                    </div><!-- .yat-inner ends here -->

                    <div class="yat-navlinks">
                        <span class="yat-left">
                            <a href="javascript:void(0);">Nach links navigieren</a>
                        </span>

                        <span class="yat-right">
                            <a href="javascript:void(0);">Nach rechts navigieren</a>
                        </span>
                    </div><!-- .yat-navlinks ends here -->

                </div><!-- .yat-viewport ends here -->
            </div><!-- .yat-timeline-inner1 ends here -->
        </div><!-- .yat-timeline -->
    </div>
</div>


<script type="text/javascript">
    $(document).ready(function(){

        /*alert("start");

        for(var h = 0; h < 1000; h++) {

            var c = $(".yat-navigation .yat-inner .yat-elements");
            var last = c.children().last();
            c.css({ "width": parseInt(c.css("width"), 10) + 500 });
            c.append(last.clone());
        }

        alert("stop");*/

        var c = $(".yat-viewport .yat-elements");

        // important childs
        var i_child =
            c.children('.important').first().outerWidth() +
            parseInt(c.children('.important').css("margin-left"), 10) +
            parseInt(c.children('.important').css("margin-right"), 10);

        var i_child_count = c.children('.important').length;

        // normal childs
        var n_child =
            c.children(':not(.important)').first().outerWidth() +
            parseInt(c.children(':not(.important)').first().css("margin-left"), 10) +
            parseInt(c.children(':not(.important)').first().css("margin-right"), 10);

        var n_child_count = c.children(':not(.important)').length;

        c.css("width", (i_child * i_child_count) + (n_child * n_child_count));

        addOne(n_child);
        addOne(n_child);
        addOne(n_child);
        addOne(n_child);
        addOne(n_child);

        var scroll_counter = 0;

        /* ios */
        c.parent().bind("touchmove", function(){
            if(scroll_counter * n_child + c.offset().left < 0) {

                setTimeout(function(){
                    for(var a = 0; a < 20; a++) {
                        addOne(n_child);
                        scroll_counter++;
                    }
                }, 1);
            }
        });

        /* real modern browsers */
        c.parent().scroll(function(){
            if((scroll_counter * n_child + 5) + c.offset().left < 0) {
                addOne(n_child);
                scroll_counter++;

                addOne(n_child);
                scroll_counter++;

                addOne(n_child);
                scroll_counter++;
            }
        });


        $(".yat-viewport .yat-left a").click(function(){
            jumpTo(getCurrentElement().prev());
        });

        $(".yat-viewport .yat-right a").click(function(){
            jumpTo(getCurrentElement().next());
        });

    });

    $(".yat-navigation .yat-elements li a").click(function(e){
        e.preventDefault();

        var target = $(this).attr("href");

        jumpTo($(target));

        $(".yat-navigation .yat-elements li a").removeClass("active");
        $(this).addClass("active");
    });

    /*function removeOne(width) {
        var c = $(".yat-viewport .yat-elements");
        c.children().first().remove();
        c.css({ "width": c.css("width") - width });
    }*/

    function addOne(width) {
        var c = $(".yat-viewport .yat-elements");

        c.css({ "width": parseInt(c.css("width"), 10) + width });
        c.append(c.children().last().clone());
    }


    function jumpTo(element) {

        $(".yat-viewport .yat-inner").animate({
            scrollLeft: element.position().left
            }, {
                duration: 100
            }
        );
    }

    function scrollToNextElement() {
        jumpTo(getCurrentElement());
    }

    function getCurrentElement() {

        // minumum and maximum position-left
        var scroll_l = $(".yat-viewport .yat-inner").scrollLeft();
        var scroll_r = scroll_l + $(".yat-viewport .yat-inner").width();

        var current_element = null;

        $(".yat-viewport .yat-elements").children().each(function(){
            if(
                $(this).position().left >= scroll_l &&
                $(this).position().left <= scroll_r
            ) {
                current_element = $(this);
                return false;
            }
        });

        return current_element;
    }

</script>

</body>
</html>