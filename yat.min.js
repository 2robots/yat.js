(function(){var ak=this,ae=ak._,ag={},au=Array.prototype,ad=Object.prototype,ap=Function.prototype,ay=au.push,aj=au.slice,aw=au.concat,am=ad.toString,at=ad.hasOwnProperty,af=au.forEach,ai=au.map,ac=au.reduce,aq=au.reduceRight,ar=au.filter,av=au.every,al=au.some,Z=au.indexOf,ax=au.lastIndexOf,aa=Array.isArray,az=Object.keys,ao=ap.bind,ab=function(a){return a instanceof ab?a:this instanceof ab?(this._wrapped=a,void 0):new ab(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=ab),exports._=ab):ak._=ab,ab.VERSION="1.4.3";var X=ab.each=ab.forEach=function(h,f,g){if(null!=h){if(af&&h.forEach===af){h.forEach(f,g)}else{if(h.length===+h.length){for(var c=0,d=h.length;d>c;c++){if(f.call(g,h[c],c,h)===ag){return}}}else{for(var b in h){if(ab.has(h,b)&&f.call(g,h[b],b,h)===ag){return}}}}}};ab.map=ab.collect=function(d,a,b){var c=[];return null==d?c:ai&&d.map===ai?d.map(a,b):(X(d,function(g,e,f){c[c.length]=a.call(b,g,e,f)}),c)};var J="Reduce of empty array with no initial value";ab.reduce=ab.foldl=ab.inject=function(f,b,c,d){var a=arguments.length>2;if(null==f&&(f=[]),ac&&f.reduce===ac){return d&&(b=ab.bind(b,d)),a?f.reduce(b,c):f.reduce(b)}if(X(f,function(h,g,e){a?c=b.call(d,c,h,g,e):(c=h,a=!0)}),!a){throw new TypeError(J)}return c},ab.reduceRight=ab.foldr=function(j,f,g,h){var c=arguments.length>2;if(null==j&&(j=[]),aq&&j.reduceRight===aq){return h&&(f=ab.bind(f,h)),c?j.reduceRight(f,g):j.reduceRight(f)}var d=j.length;if(d!==+d){var b=ab.keys(j);d=b.length}if(X(j,function(e,i,a){i=b?b[--d]:--d,c?g=f.call(h,g,j[i],i,a):(g=j[i],c=!0)}),!c){throw new TypeError(J)}return g},ab.find=ab.detect=function(d,a,b){var c;return U(d,function(g,e,f){return a.call(b,g,e,f)?(c=g,!0):void 0}),c},ab.filter=ab.select=function(d,a,b){var c=[];return null==d?c:ar&&d.filter===ar?d.filter(a,b):(X(d,function(g,e,f){a.call(b,g,e,f)&&(c[c.length]=g)}),c)},ab.reject=function(c,a,b){return ab.filter(c,function(g,f,d){return !a.call(b,g,f,d)},b)},ab.every=ab.all=function(d,b,c){b||(b=ab.identity);var a=!0;return null==d?a:av&&d.every===av?d.every(b,c):(X(d,function(g,f,e){return(a=a&&b.call(c,g,f,e))?void 0:ag}),!!a)};var U=ab.some=ab.any=function(d,b,c){b||(b=ab.identity);var a=!1;return null==d?a:al&&d.some===al?d.some(b,c):(X(d,function(g,f,e){return a||(a=b.call(c,g,f,e))?ag:void 0}),!!a)};ab.contains=ab.include=function(b,a){return null==b?!1:Z&&b.indexOf===Z?-1!=b.indexOf(a):U(b,function(c){return c===a})},ab.invoke=function(c,a){var b=aj.call(arguments,2);return ab.map(c,function(d){return(ab.isFunction(a)?a:d[a]).apply(d,b)})},ab.pluck=function(b,a){return ab.map(b,function(c){return c[a]})},ab.where=function(b,a){return ab.isEmpty(a)?[]:ab.filter(b,function(d){for(var c in a){if(a[c]!==d[c]){return !1}}return !0})},ab.max=function(d,a,b){if(!a&&ab.isArray(d)&&d[0]===+d[0]&&65535>d.length){return Math.max.apply(Math,d)}if(!a&&ab.isEmpty(d)){return -1/0}var c={computed:-1/0,value:-1/0};return X(d,function(h,f,g){var e=a?a.call(b,h,f,g):h;e>=c.computed&&(c={value:h,computed:e})}),c.value},ab.min=function(d,a,b){if(!a&&ab.isArray(d)&&d[0]===+d[0]&&65535>d.length){return Math.min.apply(Math,d)}if(!a&&ab.isEmpty(d)){return 1/0}var c={computed:1/0,value:1/0};return X(d,function(h,f,g){var e=a?a.call(b,h,f,g):h;c.computed>e&&(c={value:h,computed:e})}),c.value},ab.shuffle=function(d){var a,b=0,c=[];return X(d,function(e){a=ab.random(b++),c[b-1]=c[a],c[a]=e}),c};var Q=function(a){return ab.isFunction(a)?a:function(b){return b[a]}};ab.sortBy=function(d,a,b){var c=Q(a);return ab.pluck(ab.map(d,function(g,f,e){return{value:g,index:f,criteria:c.call(b,g,f,e)}}).sort(function(i,f){var g=i.criteria,h=f.criteria;if(g!==h){if(g>h||void 0===g){return 1}if(h>g||void 0===h){return -1}}return i.index<f.index?-1:1}),"value")};var an=function(g,c,d,f){var a={},b=Q(c||ab.identity);return X(g,function(h,e){var i=b.call(d,h,e,g);f(a,i,h)}),a};ab.groupBy=function(c,a,b){return an(c,a,b,function(f,d,e){(ab.has(f,d)?f[d]:f[d]=[]).push(e)})},ab.countBy=function(c,a,b){return an(c,a,b,function(e,d){ab.has(e,d)||(e[d]=0),e[d]++})},ab.sortedIndex=function(k,f,g,h){g=null==g?ab.identity:Q(g);for(var c=g.call(h,f),d=0,b=k.length;b>d;){var j=d+b>>>1;c>g.call(h,k[j])?d=j+1:b=j}return d},ab.toArray=function(a){return a?ab.isArray(a)?aj.call(a):a.length===+a.length?ab.map(a,ab.identity):ab.values(a):[]},ab.size=function(a){return null==a?0:a.length===+a.length?a.length:ab.keys(a).length},ab.first=ab.head=ab.take=function(c,a,b){return null==c?void 0:null==a||b?c[0]:aj.call(c,0,a)},ab.initial=function(c,a,b){return aj.call(c,0,c.length-(null==a||b?1:a))},ab.last=function(c,a,b){return null==c?void 0:null==a||b?c[c.length-1]:aj.call(c,Math.max(c.length-a,0))},ab.rest=ab.tail=ab.drop=function(c,a,b){return aj.call(c,null==a||b?1:a)},ab.compact=function(a){return ab.filter(a,ab.identity)};var H=function(c,a,b){return X(c,function(d){ab.isArray(d)?a?ay.apply(b,d):H(d,a,b):b.push(d)}),b};ab.flatten=function(b,a){return H(b,a,[])},ab.without=function(a){return ab.difference(a,aj.call(arguments,1))},ab.uniq=ab.unique=function(j,f,g,h){ab.isFunction(f)&&(h=g,g=f,f=!1);var c=g?ab.map(j,g,h):j,d=[],b=[];return X(c,function(a,i){(f?i&&b[b.length-1]===a:ab.contains(b,a))||(b.push(a),d.push(j[i]))}),d},ab.union=function(){return ab.uniq(aw.apply(au,arguments))},ab.intersection=function(b){var a=aj.call(arguments,1);return ab.filter(ab.uniq(b),function(c){return ab.every(a,function(d){return ab.indexOf(d,c)>=0})})},ab.difference=function(b){var a=aw.apply(au,aj.call(arguments,1));return ab.filter(b,function(c){return !ab.contains(a,c)})},ab.zip=function(){for(var d=aj.call(arguments),a=ab.max(ab.pluck(d,"length")),b=Array(a),c=0;a>c;c++){b[c]=ab.pluck(d,""+c)}return b},ab.object=function(f,b){if(null==f){return{}}for(var c={},d=0,a=f.length;a>d;d++){b?c[f[d]]=b[d]:c[f[d][0]]=f[d][1]}return c},ab.indexOf=function(f,b,c){if(null==f){return -1}var d=0,a=f.length;if(c){if("number"!=typeof c){return d=ab.sortedIndex(f,b),f[d]===b?d:-1}d=0>c?Math.max(0,a+c):c}if(Z&&f.indexOf===Z){return f.indexOf(b,c)}for(;a>d;d++){if(f[d]===b){return d}}return -1},ab.lastIndexOf=function(f,b,c){if(null==f){return -1}var d=null!=c;if(ax&&f.lastIndexOf===ax){return d?f.lastIndexOf(b,c):f.lastIndexOf(b)}for(var a=d?c:f.length;a--;){if(f[a]===b){return a}}return -1},ab.range=function(g,c,d){1>=arguments.length&&(c=g||0,g=0),d=arguments[2]||1;for(var f=Math.max(Math.ceil((c-g)/d),0),a=0,b=Array(f);f>a;){b[a++]=g,g+=d}return b};var P=function(){};ab.bind=function(d,a){var b,c;if(d.bind===ao&&ao){return ao.apply(d,aj.call(arguments,1))}if(!ab.isFunction(d)){throw new TypeError}return b=aj.call(arguments,2),c=function(){if(!(this instanceof c)){return d.apply(a,b.concat(aj.call(arguments)))}P.prototype=d.prototype;var e=new P;P.prototype=null;var f=d.apply(e,b.concat(aj.call(arguments)));return Object(f)===f?f:e}},ab.bindAll=function(b){var a=aj.call(arguments,1);return 0==a.length&&(a=ab.functions(b)),X(a,function(c){b[c]=ab.bind(b[c],b)}),b},ab.memoize=function(c,a){var b={};return a||(a=ab.identity),function(){var d=a.apply(this,arguments);return ab.has(b,d)?b[d]:b[d]=c.apply(this,arguments)}},ab.delay=function(c,a){var b=aj.call(arguments,2);return setTimeout(function(){return c.apply(null,b)},a)},ab.defer=function(a){return ab.delay.apply(ab,[a,1].concat(aj.call(arguments,1)))},ab.throttle=function(k,f){var g,h,c,d,b=0,j=function(){b=new Date,c=null,d=k.apply(g,h)};return function(){var e=new Date,a=f-(e-b);return g=this,h=arguments,0>=a?(clearTimeout(c),c=null,b=e,d=k.apply(g,h)):c||(c=setTimeout(j,a)),d}},ab.debounce=function(f,b,c){var d,a;return function(){var g=this,e=arguments,h=function(){d=null,c||(a=f.apply(g,e))},j=c&&!d;return clearTimeout(d),d=setTimeout(h,b),j&&(a=f.apply(g,e)),a}},ab.once=function(c){var a,b=!1;return function(){return b?a:(b=!0,a=c.apply(this,arguments),c=null,a)}},ab.wrap=function(b,a){return function(){var c=[b];return ay.apply(c,arguments),a.apply(this,c)}},ab.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--){b=[a[c].apply(this,b)]}return b[0]}},ab.after=function(b,a){return 0>=b?a():function(){return 1>--b?a.apply(this,arguments):void 0}},ab.keys=az||function(c){if(c!==Object(c)){throw new TypeError("Invalid object")}var a=[];for(var b in c){ab.has(c,b)&&(a[a.length]=b)}return a},ab.values=function(c){var a=[];for(var b in c){ab.has(c,b)&&a.push(c[b])}return a},ab.pairs=function(c){var a=[];for(var b in c){ab.has(c,b)&&a.push([b,c[b]])}return a},ab.invert=function(c){var a={};for(var b in c){ab.has(c,b)&&(a[c[b]]=b)}return a},ab.functions=ab.methods=function(c){var a=[];for(var b in c){ab.isFunction(c[b])&&a.push(b)}return a.sort()},ab.extend=function(a){return X(aj.call(arguments,1),function(b){if(b){for(var c in b){a[c]=b[c]}}}),a},ab.pick=function(c){var a={},b=aw.apply(au,aj.call(arguments,1));return X(b,function(d){d in c&&(a[d]=c[d])}),a},ab.omit=function(d){var b={},c=aw.apply(au,aj.call(arguments,1));for(var a in d){ab.contains(c,a)||(b[a]=d[a])}return b},ab.defaults=function(a){return X(aj.call(arguments,1),function(b){if(b){for(var c in b){null==a[c]&&(a[c]=b[c])}}}),a},ab.clone=function(a){return ab.isObject(a)?ab.isArray(a)?a.slice():ab.extend({},a):a},ab.tap=function(b,a){return a(b),b};var G=function(g,q,b,k){if(g===q){return 0!==g||1/g==1/q}if(null==g||null==q){return g===q}g instanceof ab&&(g=g._wrapped),q instanceof ab&&(q=q._wrapped);var p=am.call(g);if(p!=am.call(q)){return !1}switch(p){case"[object String]":return g==q+"";case"[object Number]":return g!=+g?q!=+q:0==g?1/g==1/q:g==+q;case"[object Date]":case"[object Boolean]":return +g==+q;case"[object RegExp]":return g.source==q.source&&g.global==q.global&&g.multiline==q.multiline&&g.ignoreCase==q.ignoreCase}if("object"!=typeof g||"object"!=typeof q){return !1}for(var h=b.length;h--;){if(b[h]==g){return k[h]==q}}b.push(g),k.push(q);var m=0,d=!0;if("[object Array]"==p){if(m=g.length,d=m==q.length){for(;m--&&(d=G(g[m],q[m],b,k));){}}}else{var l=g.constructor,j=q.constructor;if(l!==j&&!(ab.isFunction(l)&&l instanceof l&&ab.isFunction(j)&&j instanceof j)){return !1}for(var v in g){if(ab.has(g,v)&&(m++,!(d=ab.has(q,v)&&G(g[v],q[v],b,k)))){break}}if(d){for(v in q){if(ab.has(q,v)&&!m--){break}}d=!m}}return b.pop(),k.pop(),d};ab.isEqual=function(b,a){return G(b,a,[],[])},ab.isEmpty=function(b){if(null==b){return !0}if(ab.isArray(b)||ab.isString(b)){return 0===b.length}for(var a in b){if(ab.has(b,a)){return !1}}return !0},ab.isElement=function(a){return !(!a||1!==a.nodeType)},ab.isArray=aa||function(a){return"[object Array]"==am.call(a)},ab.isObject=function(a){return a===Object(a)},X(["Arguments","Function","String","Number","Date","RegExp"],function(a){ab["is"+a]=function(b){return am.call(b)=="[object "+a+"]"}}),ab.isArguments(arguments)||(ab.isArguments=function(a){return !(!a||!ab.has(a,"callee"))}),ab.isFunction=function(a){return"function"==typeof a},ab.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},ab.isNaN=function(a){return ab.isNumber(a)&&a!=+a},ab.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==am.call(a)},ab.isNull=function(a){return null===a},ab.isUndefined=function(a){return void 0===a},ab.has=function(b,a){return at.call(b,a)},ab.noConflict=function(){return ak._=ae,this},ab.identity=function(a){return a},ab.times=function(f,b,c){for(var d=Array(f),a=0;f>a;a++){d[a]=b.call(c,a)}return d},ab.random=function(b,a){return null==a&&(a=b,b=0),b+(0|Math.random()*(a-b+1))};var C={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};C.unescape=ab.invert(C.escape);var L={escape:RegExp("["+ab.keys(C.escape).join("")+"]","g"),unescape:RegExp("("+ab.keys(C.unescape).join("|")+")","g")};ab.each(["escape","unescape"],function(a){ab[a]=function(b){return null==b?"":(""+b).replace(L[a],function(c){return C[a][c]})}}),ab.result=function(c,a){if(null==c){return null}var b=c[a];return ab.isFunction(b)?b.call(c):b},ab.mixin=function(a){X(ab.functions(a),function(b){var c=ab[b]=a[b];ab.prototype[b]=function(){var d=[this._wrapped];return ay.apply(d,arguments),Y.call(this,c.apply(ab,d))}})};var K=0;ab.uniqueId=function(b){var a=""+ ++K;return b?b+a:a},ab.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ah=/(.)^/,W={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\t|\u2028|\u2029/g;ab.template=function(f,m,b){b=ab.defaults({},b,ab.templateSettings);var h=RegExp([(b.escape||ah).source,(b.interpolate||ah).source,(b.evaluate||ah).source].join("|")+"|$","g"),l=0,g="__p+='";f.replace(h,function(i,n,p,c,q){return g+=f.slice(l,q).replace(V,function(a){return"\\"+W[a]}),n&&(g+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),p&&(g+="'+\n((__t=("+p+"))==null?'':__t)+\n'"),c&&(g+="';\n"+c+"\n__p+='"),l=q+i.length,i}),g+="';\n",b.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{var k=Function(b.variable||"obj","_",g)}catch(d){throw d.source=g,d}if(m){return k(m,ab)}var j=function(a){return k.call(this,a,ab)};return j.source="function("+(b.variable||"obj")+"){\n"+g+"}",j},ab.chain=function(a){return ab(a).chain()};var Y=function(a){return this._chain?ab(a).chain():a};ab.mixin(ab),X(["pop","push","reverse","shift","sort","splice","unshift"],function(b){var a=au[b];ab.prototype[b]=function(){var c=this._wrapped;return a.apply(c,arguments),"shift"!=b&&"splice"!=b||0!==c.length||delete c[0],Y.call(this,c)}}),X(["concat","join","slice"],function(b){var a=au[b];ab.prototype[b]=function(){return Y.call(this,a.apply(this._wrapped,arguments))}}),ab.extend(ab.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);(function(){var Z=this,d=Z.Backbone,ab=[],b=ab.push,T=ab.slice,V=ab.splice,ac;ac="undefined"!==typeof exports?exports:Z.Backbone={};ac.VERSION="0.9.9";var ad=Z._;!ad&&"undefined"!==typeof require&&(ad=require("underscore"));ac.$=Z.jQuery||Z.Zepto||Z.ender;ac.noConflict=function(){Z.Backbone=d;return this};ac.emulateHTTP=!1;ac.emulateJSON=!1;var Q=/\s+/,Y=function(h,g,o,n){if(!o){return !0}if("object"===typeof o){for(var j in o){h[g].apply(h,[j,o[j]].concat(n))}}else{if(Q.test(o)){o=o.split(Q);j=0;for(var k=o.length;j<k;j++){h[g].apply(h,[o[j]].concat(n))}}else{return !0}}},P=function(g,e,k){var j,g=-1,h=e.length;switch(k.length){case 0:for(;++g<h;){(j=e[g]).callback.call(j.ctx)}break;case 1:for(;++g<h;){(j=e[g]).callback.call(j.ctx,k[0])}break;case 2:for(;++g<h;){(j=e[g]).callback.call(j.ctx,k[0],k[1])}break;case 3:for(;++g<h;){(j=e[g]).callback.call(j.ctx,k[0],k[1],k[2])}break;default:for(;++g<h;){(j=e[g]).callback.apply(j.ctx,k)}}},ab=ac.Events={on:function(g,e,h){if(!Y(this,"on",g,[e,h])||!e){return this}this._events||(this._events={});(this._events[g]||(this._events[g]=[])).push({callback:e,context:h,ctx:h||this});return this},once:function(g,e,k){if(!Y(this,"once",g,[e,k])||!e){return this}var j=this,h=ad.once(function(){j.off(g,h);e.apply(this,arguments)});h._callback=e;this.on(g,h,k);return this},off:function(w,v,u){var t,s,k,r,o,e,p,n;if(!this._events||!Y(this,"off",w,[v,u])){return this}if(!w&&!v&&!u){return this._events={},this}r=w?[w]:ad.keys(this._events);o=0;for(e=r.length;o<e;o++){if(w=r[o],t=this._events[w]){k=[];if(v||u){p=0;for(n=t.length;p<n;p++){s=t[p],(v&&v!==(s.callback._callback||s.callback)||u&&u!==s.context)&&k.push(s)}}this._events[w]=k}}return this},trigger:function(g){if(!this._events){return this}var e=T.call(arguments,1);if(!Y(this,"trigger",g,e)){return this}var j=this._events[g],h=this._events.all;j&&P(this,j,e);h&&P(this,h,arguments);return this},listenTo:function(g,e,k){var j=this._listeners||(this._listeners={}),h=g._listenerId||(g._listenerId=ad.uniqueId("l"));j[h]=g;g.on(e,k||this,this);return this},stopListening:function(g,e,k){var j=this._listeners;if(j){if(g){g.off(e,k,this),!e&&!k&&delete j[g._listenerId]}else{for(var h in j){j[h].off(null,null,this)}this._listeners={}}return this}}};ab.bind=ab.on;ab.unbind=ab.off;ad.extend(ac,ab);var X=ac.Model=function(g,e){var j,h=g||{};this.cid=ad.uniqueId("c");this.changed={};this.attributes={};this._changes=[];e&&e.collection&&(this.collection=e.collection);e&&e.parse&&(h=this.parse(h));(j=ad.result(this,"defaults"))&&ad.defaults(h,j);this.set(h,{silent:!0});this._currentAttributes=ad.clone(this.attributes);this._previousAttributes=ad.clone(this.attributes);this.initialize.apply(this,arguments)};ad.extend(X.prototype,ab,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(){return ad.clone(this.attributes)},sync:function(){return ac.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return ad.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(j,e,p){var o,n;if(null==j){return this}ad.isObject(j)?(n=j,p=e):(n={})[j]=e;var j=p&&p.silent,h=p&&p.unset;if(!this._validate(n,p)){return !1}this.idAttribute in n&&(this.id=n[this.idAttribute]);var k=this.attributes;for(o in n){e=n[o],h?delete k[o]:k[o]=e,this._changes.push(o,e)}this._hasComputed=!1;j||this.change(p);return this},unset:function(g,e){return this.set(g,void 0,ad.extend({},e,{unset:!0}))},clear:function(g){var e={},h;for(h in this.attributes){e[h]=void 0}return this.set(e,ad.extend({},g,{unset:!0}))},fetch:function(g){g=g?ad.clone(g):{};void 0===g.parse&&(g.parse=!0);var e=this,h=g.success;g.success=function(j){if(!e.set(e.parse(j),g)){return false}h&&h(e,j,g)};return this.sync("read",this,g)},save:function(h,e,r){var p,o,k;null==h||ad.isObject(h)?(p=h,r=e):null!=h&&((p={})[h]=e);r=r?ad.clone(r):{};if(r.wait){if(p&&!this._validate(p,r)){return !1}o=ad.clone(this.attributes)}h=ad.extend({},r,{silent:!0});if(p&&!this.set(p,r.wait?h:r)||!p&&!this._validate(null,r)){return !1}var n=this,j=r.success;r.success=function(s){k=true;var g=n.parse(s);r.wait&&(g=ad.extend(p||{},g));if(!n.set(g,r)){return false}j&&j(n,s,r)};e=this.isNew()?"create":r.patch?"patch":"update";"patch"==e&&(r.attrs=p);e=this.sync(e,this,r);!k&&r.wait&&(this.clear(h),this.set(o,h));return e},destroy:function(g){var g=g?ad.clone(g):{},e=this,k=g.success,j=function(){e.trigger("destroy",e,e.collection,g)};g.success=function(n){(g.wait||e.isNew())&&j();k&&k(e,n,g)};if(this.isNew()){return g.success(),!1}var h=this.sync("delete",this,g);g.wait||j();return h},url:function(){var e=ad.result(this,"urlRoot")||ad.result(this.collection,"url")||M();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(g){var e=this._changing;this._changing=!0;var j=this._computeChanges(!0);this._pending=!!j.length;for(var h=j.length-2;0<=h;h-=2){this.trigger("change:"+j[h],this,j[h+1],g)}if(e){return this}for(;this._pending;){this._pending=!1,this.trigger("change",this,g),this._previousAttributes=ad.clone(this.attributes)}this._changing=!1;return this},hasChanged:function(e){this._hasComputed||this._computeChanges();return null==e?!ad.isEmpty(this.changed):ad.has(this.changed,e)},changedAttributes:function(g){if(!g){return this.hasChanged()?ad.clone(this.changed):!1}var e,k=!1,j=this._previousAttributes,h;for(h in g){if(!ad.isEqual(j[h],e=g[h])){(k||(k={}))[h]=e}}return k},_computeChanges:function(j){this.changed={};for(var h={},s=[],r=this._currentAttributes,o=this._changes,p=o.length-2;0<=p;p-=2){var n=o[p],k=o[p+1];h[n]||(h[n]=!0,r[n]!==k&&(this.changed[n]=k,j&&(s.push(n,k),r[n]=k)))}j&&(this._changes=[]);this._hasComputed=!0;return s},previous:function(e){return null==e||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return ad.clone(this._previousAttributes)},_validate:function(g,e){if(!this.validate){return !0}var g=ad.extend({},this.attributes,g),h=this.validate(g,e);if(!h){return !0}e&&e.error&&e.error(this,h,e);this.trigger("error",this,h,e);return !1}});var W=ac.Collection=function(g,e){e||(e={});e.model&&(this.model=e.model);void 0!==e.comparator&&(this.comparator=e.comparator);this._reset();this.initialize.apply(this,arguments);g&&this.reset(g,ad.extend({silent:!0},e))};ad.extend(W.prototype,ab,{model:X,initialize:function(){},toJSON:function(e){return this.map(function(g){return g.toJSON(e)})},sync:function(){return ac.sync.apply(this,arguments)},add:function(j,e){var s,r,p,o,n=e&&e.at,k=null==(e&&e.sort)?!0:e.sort,j=ad.isArray(j)?j.slice():[j];for(s=j.length-1;0<=s;s--){(r=this._prepareModel(j[s],e))?(j[s]=r,(p=null!=r.id&&this._byId[r.id])||this._byCid[r.cid]?(e&&(e.merge&&p)&&(p.set(r.attributes,e),o=k),j.splice(s,1)):(r.on("all",this._onModelEvent,this),this._byCid[r.cid]=r,null!=r.id&&(this._byId[r.id]=r))):(this.trigger("error",this,j[s],e),j.splice(s,1))}j.length&&(o=k);this.length+=j.length;s=[null!=n?n:this.models.length,0];b.apply(s,j);V.apply(this.models,s);o&&(this.comparator&&null==n)&&this.sort({silent:!0});if(e&&e.silent){return this}for(;r=j.shift();){r.trigger("add",r,this,e)}return this},remove:function(h,e){var o,n,k,j;e||(e={});h=ad.isArray(h)?h.slice():[h];o=0;for(n=h.length;o<n;o++){if(j=this.get(h[o])){delete this._byId[j.id],delete this._byCid[j.cid],k=this.indexOf(j),this.models.splice(k,1),this.length--,e.silent||(e.index=k,j.trigger("remove",j,this,e)),this._removeReference(j)}}return this},push:function(g,e){g=this._prepareModel(g,e);this.add(g,ad.extend({at:this.length},e));return g},pop:function(g){var e=this.at(this.length-1);this.remove(e,g);return e},unshift:function(g,e){g=this._prepareModel(g,e);this.add(g,ad.extend({at:0},e));return g},shift:function(g){var e=this.at(0);this.remove(e,g);return e},slice:function(g,e){return this.models.slice(g,e)},get:function(e){return null==e?void 0:this._byId[null!=e.id?e.id:e]||this._byCid[e.cid||e]},at:function(e){return this.models[e]},where:function(e){return ad.isEmpty(e)?[]:this.filter(function(g){for(var h in e){if(e[h]!==g.get(h)){return !1}}return !0})},sort:function(e){if(!this.comparator){throw Error("Cannot sort a set without a comparator")}ad.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(ad.bind(this.comparator,this));(!e||!e.silent)&&this.trigger("sort",this,e);return this},pluck:function(e){return ad.invoke(this.models,"get",e)},update:function(v,u){var t,s,r,p,o=[],n=[],e={},k=this.model.prototype.idAttribute,u=ad.extend({add:!0,merge:!0,remove:!0},u);u.parse&&(v=this.parse(v));ad.isArray(v)||(v=v?[v]:[]);if(u.add&&!u.remove){return this.add(v,u)}s=0;for(r=v.length;s<r;s++){t=v[s],p=this.get(t.id||t.cid||t[k]),u.remove&&p&&(e[p.cid]=!0),(u.add&&!p||u.merge&&p)&&o.push(t)}if(u.remove){s=0;for(r=this.models.length;s<r;s++){t=this.models[s],e[t.cid]||n.push(t)}}n.length&&this.remove(n,u);o.length&&this.add(o,u);return this},reset:function(g,e){e||(e={});e.parse&&(g=this.parse(g));for(var j=0,h=this.models.length;j<h;j++){this._removeReference(this.models[j])}e.previousModels=this.models;this._reset();g&&this.add(g,ad.extend({silent:!0},e));e.silent||this.trigger("reset",this,e);return this},fetch:function(g){g=g?ad.clone(g):{};void 0===g.parse&&(g.parse=!0);var e=this,h=g.success;g.success=function(j){e[g.update?"update":"reset"](j,g);h&&h(e,j,g)};return this.sync("read",this,g)},create:function(g,e){var j=this,e=e?ad.clone(e):{},g=this._prepareModel(g,e);if(!g){return !1}e.wait||j.add(g,e);var h=e.success;e.success=function(n,k,o){o.wait&&j.add(n,o);h&&h(n,k,o)};g.save(null,e);return g},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},chain:function(){return ad(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(g,e){if(g instanceof X){return g.collection||(g.collection=this),g}e||(e={});e.collection=this;var h=new this.model(g,e);return !h._validate(g,e)?!1:h},_removeReference:function(e){this===e.collection&&delete e.collection;e.off("all",this._onModelEvent,this)},_onModelEvent:function(g,e,j,h){("add"===g||"remove"===g)&&j!==this||("destroy"===g&&this.remove(e,h),e&&g==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});ad.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min sortedIndex toArray size first head take initial rest tail last without indexOf shuffle lastIndexOf isEmpty".split(" "),function(e){W.prototype[e]=function(){var g=T.call(arguments);g.unshift(this.models);return ad[e].apply(ad,g)}});ad.each(["groupBy","countBy","sortBy"],function(e){W.prototype[e]=function(g,j){var h=ad.isFunction(g)?g:function(k){return k.get(g)};return ad[e](this.models,h,j)}});var L=ac.Router=function(e){e||(e={});e.routes&&(this.routes=e.routes);this._bindRoutes();this.initialize.apply(this,arguments)},U=/\((.*?)\)/g,S=/:\w+/g,R=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;ad.extend(L.prototype,ab,{initialize:function(){},route:function(g,e,h){ad.isRegExp(g)||(g=this._routeToRegExp(g));h||(h=this[e]);ac.history.route(g,ad.bind(function(j){j=this._extractParameters(g,j);h&&h.apply(this,j);this.trigger.apply(this,["route:"+e].concat(j));ac.history.trigger("route",this,e,j)},this));return this},navigate:function(g,e){ac.history.navigate(g,e);return this},_bindRoutes:function(){if(this.routes){for(var g,e=ad.keys(this.routes);null!=(g=e.pop());){this.route(g,this.routes[g])}}},_routeToRegExp:function(e){e=e.replace(O,"\\$&").replace(U,"(?:$1)?").replace(S,"([^/]+)").replace(R,"(.*?)");return RegExp("^"+e+"$")},_extractParameters:function(g,e){return g.exec(e).slice(1)}});var aa=ac.History=function(){this.handlers=[];ad.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},m=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,q=/msie [\w.]+/,l=/\/$/;aa.started=!1;ad.extend(aa.prototype,ab,{interval:50,getHash:function(e){return(e=(e||this).location.href.match(/#(.*)$/))?e[1]:""},getFragment:function(g,e){if(null==g){if(this._hasPushState||!this._wantsHashChange||e){var g=this.location.pathname,h=this.root.replace(l,"");g.indexOf(h)||(g=g.substr(h.length))}else{g=this.getHash()}}return g.replace(m,"")},start:function(g){if(aa.started){throw Error("Backbone.history has already been started")}aa.started=!0;this.options=ad.extend({},{root:"/"},this.options,g);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!(!this.options.pushState||!this.history||!this.history.pushState);var g=this.getFragment(),e=document.documentMode,e=q.exec(navigator.userAgent.toLowerCase())&&(!e||7>=e);this.root=("/"+this.root+"/").replace(N,"/");e&&this._wantsHashChange&&(this.iframe=ac.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(g));this._hasPushState?ac.$(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange" in window&&!e?ac.$(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=g;g=this.location;e=g.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!e){return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0}this._wantsPushState&&(this._hasPushState&&e&&g.hash)&&(this.fragment=this.getHash().replace(m,""),this.history.replaceState({},document.title,this.root+this.fragment+g.search));if(!this.options.silent){return this.loadUrl()}},stop:function(){ac.$(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);aa.started=!1},route:function(g,e){this.handlers.unshift({route:g,callback:e})},checkUrl:function(){var e=this.getFragment();e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe)));if(e===this.fragment){return !1}this.iframe&&this.navigate(e);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(g){var e=this.fragment=this.getFragment(g);return ad.any(this.handlers,function(h){if(h.route.test(e)){return h.callback(e),!0}})},navigate:function(g,e){if(!aa.started){return !1}if(!e||!0===e){e={trigger:e}}g=this.getFragment(g||"");if(this.fragment!==g){this.fragment=g;var h=this.root+g;if(this._hasPushState){this.history[e.replace?"replaceState":"pushState"]({},document.title,h)}else{if(this._wantsHashChange){this._updateHash(this.location,g,e.replace),this.iframe&&g!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,g,e.replace))}else{return this.location.assign(h)}}e.trigger&&this.loadUrl(g)}},_updateHash:function(g,e,h){h?(h=g.href.replace(/(javascript:|#).*$/,""),g.replace(h+"#"+e)):g.hash="#"+e}});ac.history=new aa;var i=ac.View=function(e){this.cid=ad.uniqueId("view");this._configure(e||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},f=/^(\S+)\s*(.*)$/,c="model collection el id attributes className tagName events".split(" ");ad.extend(i.prototype,ab,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},make:function(g,e,h){g=document.createElement(g);e&&ac.$(g).attr(e);null!=h&&ac.$(g).html(h);return g},setElement:function(g,e){this.$el&&this.undelegateEvents();this.$el=g instanceof ac.$?g:ac.$(g);this.el=this.$el[0];!1!==e&&this.delegateEvents();return this},delegateEvents:function(g){if(g||(g=ad.result(this,"events"))){this.undelegateEvents();for(var e in g){var k=g[e];ad.isFunction(k)||(k=this[g[e]]);if(!k){throw Error('Method "'+g[e]+'" does not exist')}var j=e.match(f),h=j[1],j=j[2],k=ad.bind(k,this),h=h+(".delegateEvents"+this.cid);""===j?this.$el.bind(h,k):this.$el.delegate(j,h,k)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=ad.extend({},ad.result(this,"options"),e));ad.extend(this,ad.pick(e,c));this.options=e},_ensureElement:function(){if(this.el){this.setElement(ad.result(this,"el"),!1)}else{var e=ad.extend({},ad.result(this,"attributes"));this.id&&(e.id=ad.result(this,"id"));this.className&&(e["class"]=ad.result(this,"className"));this.setElement(this.make(ad.result(this,"tagName"),e),!1)}}});var a={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};ac.sync=function(g,e,s){var r=a[g];ad.defaults(s||(s={}),{emulateHTTP:ac.emulateHTTP,emulateJSON:ac.emulateJSON});var p={type:r,dataType:"json"};s.url||(p.url=ad.result(e,"url")||M());if(null==s.data&&e&&("create"===g||"update"===g||"patch"===g)){p.contentType="application/json",p.data=JSON.stringify(s.attrs||e.toJSON(s))}s.emulateJSON&&(p.contentType="application/x-www-form-urlencoded",p.data=p.data?{model:p.data}:{});if(s.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){p.type="POST";s.emulateJSON&&(p.data._method=r);var o=s.beforeSend;s.beforeSend=function(h){h.setRequestHeader("X-HTTP-Method-Override",r);if(o){return o.apply(this,arguments)}}}"GET"!==p.type&&!s.emulateJSON&&(p.processData=!1);var k=s.success;s.success=function(h,t,j){k&&k(h,t,j);e.trigger("sync",e,h,s)};var n=s.error;s.error=function(h){n&&n(e,h,s);e.trigger("error",e,h,s)};g=ac.ajax(ad.extend(p,s));e.trigger("request",e,g,s);return g};ac.ajax=function(){return ac.$.ajax.apply(ac.$,arguments)};X.extend=W.extend=L.extend=i.extend=aa.extend=function(g,e){var k=this,j;j=g&&ad.has(g,"constructor")?g.constructor:function(){k.apply(this,arguments)};ad.extend(j,k,e);var h=function(){this.constructor=j};h.prototype=k.prototype;j.prototype=new h;g&&ad.extend(j.prototype,g);j.__super__=k.prototype;return j};var M=function(){throw Error('A "url" property or function must be specified')}}).call(this);(function(){(function(){var a=jQuery.event.special,c="D"+(+new Date()),b="D"+(+new Date()+1);a.scrollstart={setup:function(){var e,d=function(h){var f=this,g=arguments;if(e){clearTimeout(e)}else{h.type="scrollstart";jQuery.event.handle.apply(f,g)}e=setTimeout(function(){e=null},a.scrollstop.latency)};jQuery(this).bind("scroll",d).data(c,d)},teardown:function(){jQuery(this).unbind("scroll",jQuery(this).data(c))}};a.scrollstop={latency:300,setup:function(){var e,d=function(h){var f=this,g=arguments;if(e){clearTimeout(e)}e=setTimeout(function(){e=null;h.type="scrollstop";jQuery.event.handle.apply(f,g)},a.scrollstop.latency)};jQuery(this).bind("scroll",d).data(b,d)},teardown:function(){jQuery(this).unbind("scroll",jQuery(this).data(b))}}})()}).call(this);(function(n,p,u){var w=n([]),s=n.resize=n.extend(n.resize,{}),o,l="setTimeout",m="resize",t=m+"-special-event",v="delay",r="throttleWindow";s[v]=250;s[r]=true;n.event.special[m]={setup:function(){if(!s[r]&&this[l]){return false}var a=n(this);w=w.add(a);n.data(this,t,{w:a.width(),h:a.height()});if(w.length===1){q()}},teardown:function(){if(!s[r]&&this[l]){return false}var a=n(this);w=w.not(a);a.removeData(t);if(!w.length){clearTimeout(o)}},add:function(b){if(!s[r]&&this[l]){return false}var c;function a(d,h,g){var f=n(this),e=n.data(this,t);e.w=h!==u?h:f.width();e.h=g!==u?g:f.height();c.apply(this,arguments)}if(n.isFunction(b)){c=b;return a}else{c=b.handler;b.handler=a}}};function q(){o=p[l](function(){w.each(function(){var d=n(this),a=d.width(),b=d.height(),c=n.data(this,t);if(a!==c.w||b!==c.h){d.trigger(m,[c.w=a,c.h=b])}});q()},s[v])}})(jQuery,this);function Hammer(n,v,k){var h=this;var B={prevent_default:false,css_hacks:true,swipe:true,swipe_time:200,swipe_min_distance:20,drag:true,drag_vertical:true,drag_horizontal:true,drag_min_distance:20,transform:true,scale_treshold:0.1,rotation_treshold:15,tap:true,tap_double:true,tap_max_interval:300,tap_max_distance:10,tap_double_distance:20,hold:true,hold_timeout:500};v=E(B,v);(function(){if(!v.css_hacks){return false}var T=["webkit","moz","ms","o",""];var Q={userSelect:"none",touchCallout:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"};var S="";for(var P=0;P<T.length;P++){for(var R in Q){S=R;if(T[P]){S=T[P]+S.substring(0,1).toUpperCase()+S.substring(1)}n.style[S]=Q[R]}}})();var K=0;var u=0;var L=0;var z={};var M=0;var j=false;var f=null;var e=null;var t=null;var D={x:0,y:0};var c=null;var C=null;var N={};var b=false;var i;var d;var A;var I=("ontouchstart" in window);var s=false;this.option=function(P,Q){if(Q!==k){v[P]=Q}return v[P]};this.getDirectionFromAngle=function(R){var S={down:R>=45&&R<135,left:R>=135||R<=-135,up:R<-45&&R>-135,right:R>=-45&&R<=45};var Q,P;for(P in S){if(S[P]){Q=P;break}}return Q};this.destroy=function(){if(I){a(n,"touchstart touchmove touchend touchcancel",x)}else{a(n,"mouseup mousedown mousemove",x);a(n,"mouseout",r)}};function w(P){return P.touches?P.touches.length:1}function O(S){S=S||window.event;if(!I){var T=document,Q=T.body;return[{x:S.pageX||S.clientX+(T&&T.scrollLeft||Q&&Q.scrollLeft||0)-(T&&T.clientLeft||Q&&T.clientLeft||0),y:S.pageY||S.clientY+(T&&T.scrollTop||Q&&Q.scrollTop||0)-(T&&T.clientTop||Q&&T.clientTop||0)}]}else{var V=[],U;for(var R=0,P=S.touches.length;R<P;R++){U=S.touches[R];V.push({x:U.pageX,y:U.pageY})}return V}}function o(Q,P){return Math.atan2(P.y-Q.y,P.x-Q.x)*180/Math.PI}function m(R,Q){var P=Q.x-R.x,S=Q.y-R.y;return Math.sqrt((P*P)+(S*S))}function p(P,Q){if(P.length==2&&Q.length==2){var R=m(P[0],P[1]);var S=m(Q[0],Q[1]);return S/R}return 0}function l(Q,R){if(Q.length==2&&R.length==2){var S=o(Q[1],Q[0]);var P=o(R[1],R[0]);return P-S}return 0}function J(P,Q){Q.touches=O(Q.originalEvent);Q.type=P;if(q(h["on"+P])){h["on"+P].call(h,Q)}}function F(P){P=P||window.event;if(P.preventDefault){P.preventDefault();P.stopPropagation()}else{P.returnValue=false;P.cancelBubble=true}}function G(){z={};j=false;M=0;K=0;u=0;f=null}var y={hold:function(P){if(v.hold){f="hold";clearTimeout(C);C=setTimeout(function(){if(f=="hold"){J("hold",{originalEvent:P,position:z.start})}},v.hold_timeout)}},swipe:function(V){if(!z.move||f==="transform"){return}var T=z.move[0].x-z.start[0].x;var S=z.move[0].y-z.start[0].y;K=Math.sqrt(T*T+S*S);var R=new Date().getTime();var U=R-t;if(v.swipe&&(v.swipe_time>U)&&(K>v.swipe_min_distance)){u=o(z.start[0],z.move[0]);L=h.getDirectionFromAngle(u);f="swipe";var Q={x:z.move[0].x-N.left,y:z.move[0].y-N.top};var P={originalEvent:V,position:Q,direction:L,distance:K,distanceX:T,distanceY:S,angle:u};J("swipe",P)}},drag:function(U){var S=z.move[0].x-z.start[0].x;var R=z.move[0].y-z.start[0].y;K=Math.sqrt(S*S+R*R);if(v.drag&&(K>v.drag_min_distance)||f=="drag"){u=o(z.start[0],z.move[0]);L=h.getDirectionFromAngle(u);var T=(L=="up"||L=="down");if(((T&&!v.drag_vertical)||(!T&&!v.drag_horizontal))&&(K>v.drag_min_distance)){return}f="drag";var Q={x:z.move[0].x-N.left,y:z.move[0].y-N.top};var P={originalEvent:U,position:Q,direction:L,distance:K,distanceX:S,distanceY:R,angle:u};if(j){J("dragstart",P);j=false}J("drag",P);F(U)}},transform:function(U){if(v.transform){var T=w(U);if(T!==2){return false}var S=l(z.start,z.move);var V=p(z.start,z.move);if(f==="transform"||Math.abs(1-V)>v.scale_treshold||Math.abs(S)>v.rotation_treshold){f="transform";z.center={x:((z.move[0].x+z.move[1].x)/2)-N.left,y:((z.move[0].y+z.move[1].y)/2)-N.top};if(j){z.startCenter=z.center}var R=z.center.x-z.startCenter.x;var Q=z.center.y-z.startCenter.y;K=Math.sqrt(R*R+Q*Q);var P={originalEvent:U,position:z.center,scale:V,rotation:S,distance:K,distanceX:R,distanceY:Q};if(j){J("transformstart",P);j=false}J("transform",P);F(U);return true}}return false},tap:function(T){var Q=new Date().getTime();var S=Q-t;if(v.hold&&!(v.hold&&v.hold_timeout>S)){return}var R=(function(){if(D&&v.tap_double&&e=="tap"&&z.start&&(t-c)<v.tap_max_interval){var W=Math.abs(D[0].x-z.start[0].x);var V=Math.abs(D[0].y-z.start[0].y);return(D&&z.start&&Math.max(W,V)<v.tap_double_distance)}return false})();if(R){f="double_tap";c=null;J("doubletap",{originalEvent:T,position:z.start});F(T)}else{var U=(z.move)?Math.abs(z.move[0].x-z.start[0].x):0;var P=(z.move)?Math.abs(z.move[0].y-z.start[0].y):0;K=Math.max(U,P);if(K<v.tap_max_distance){f="tap";c=Q;D=z.start;if(v.tap){J("tap",{originalEvent:T,position:z.start});F(T)}}}}};function x(T){var S;switch(T.type){case"mousedown":case"touchstart":S=w(T);s=S===1;if(S===2&&f==="drag"){J("dragend",{originalEvent:T,direction:L,distance:K,angle:u})}R();if(v.prevent_default){F(T)}break;case"mousemove":case"touchmove":S=w(T);if(!b&&S===1){return false}else{if(!b&&S===2){s=false;G();R()}}d=T;z.move=O(T);if(!y.transform(T)){y.drag(T)}break;case"mouseup":case"mouseout":case"touchcancel":case"touchend":var U=true;b=false;A=T;y.swipe(T);if(f=="drag"){J("dragend",{originalEvent:T,direction:L,distance:K,angle:u})}else{if(f=="transform"){var Q=z.center.x-z.startCenter.x;var P=z.center.y-z.startCenter.y;J("transformend",{originalEvent:T,position:z.center,scale:p(z.start,z.move),rotation:l(z.start,z.move),distance:K,distanceX:Q,distanceY:P});if(w(T)===1){G();R();U=false}}else{if(s){y.tap(i)}}}e=f;J("release",{originalEvent:T,gesture:f,position:z.move||z.start});if(U){G()}break}function R(){z.start=O(T);t=new Date().getTime();M=w(T);j=true;i=T;var V=n.getBoundingClientRect();var Z=n.clientTop||document.body.clientTop||0;var Y=n.clientLeft||document.body.clientLeft||0;var W=window.pageYOffset||n.scrollTop||document.body.scrollTop;var X=window.pageXOffset||n.scrollLeft||document.body.scrollLeft;N={top:V.top+W-Z,left:V.left+X-Y};b=true;y.hold(T)}}function r(P){if(!H(n,P.relatedTarget)){x(P)}}if(I){g(n,"touchstart touchmove touchend touchcancel",x)}else{g(n,"mouseup mousedown mousemove",x);g(n,"mouseout",r)}function H(P,R){if(!R&&window.event&&window.event.toElement){R=window.event.toElement}if(P===R){return true}if(R){var Q=R.parentNode;while(Q!==null){if(Q===P){return true}Q=Q.parentNode}}return false}function E(R,Q){var P={};if(!Q){return R}for(var S in R){if(S in Q){P[S]=Q[S]}else{P[S]=R[S]}}return P}function q(P){return Object.prototype.toString.call(P)=="[object Function]"}function g(S,R,T){R=R.split(" ");for(var Q=0,P=R.length;Q<P;Q++){if(S.addEventListener){S.addEventListener(R[Q],T,false)}else{if(document.attachEvent){S.attachEvent("on"+R[Q],T)}}}}function a(S,R,T){R=R.split(" ");for(var Q=0,P=R.length;Q<P;Q++){if(S.removeEventListener){S.removeEventListener(R[Q],T,false)}else{if(document.detachEvent){S.detachEvent("on"+R[Q],T)}}}}}(function(r){var X,z="1.7.2",ab=Math.round,ac,P={},D="en",O=(typeof module!=="undefined"&&module.exports),p="months|monthsShort|weekdays|weekdaysShort|weekdaysMin|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),w=/^\/?Date\((\-?\d+)/i,l=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|.)/g,q=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?)/g,ad=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,g=/\d\d?/,Q=/\d{1,3}/,R=/\d{3}/,I=/\d{1,4}/,J=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,b=/Z|[\+\-]\d\d:?\d\d/i,s=/T/i,K=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,d="YYYY-MM-DDTHH:mm:ssZ",j=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],B=/([\+\-]|\d\d)/gi,n="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Y={Milliseconds:1,Seconds:1000,Minutes:60000,Hours:3600000,Days:86400000,Months:2592000000,Years:31536000000},m={},F="DDD w M D d".split(" "),u="M D H h m s w".split(" "),h={M:function(){return this.month()+1},MMM:function(i){return v("monthsShort",this.month(),this,i)},MMMM:function(i){return v("months",this.month(),this,i)},D:function(){return this.date()},DDD:function(){var af=new Date(this.year(),this.month(),this.date()),i=new Date(this.year(),0,1);return ~~(((af-i)/86400000)+1.5)},d:function(){return this.day()},dd:function(i){return v("weekdaysMin",this.day(),this,i)},ddd:function(i){return v("weekdaysShort",this.day(),this,i)},dddd:function(i){return v("weekdays",this.day(),this,i)},w:function(){var af=new Date(this.year(),this.month(),this.date()-this.day()+5),i=new Date(af.getFullYear(),0,4);return ~~((af-i)/86400000/7+1.5)},YY:function(){return aa(this.year()%100,2)},YYYY:function(){return aa(this.year(),4)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return ~~(this.milliseconds()/100)},SS:function(){return aa(~~(this.milliseconds()/10),2)},SSS:function(){return aa(this.milliseconds(),3)},Z:function(){var af=-this.zone(),i="+";if(af<0){af=-af;i="-"}return i+aa(~~(af/60),2)+":"+aa(~~af%60,2)},ZZ:function(){var af=-this.zone(),i="+";if(af<0){af=-af;i="-"}return i+aa(~~(10*af/6),4)}};function v(ag,af,i,ah){var ai=i.lang();return ai[ag].call?ai[ag](i,ah):ai[ag][af]}function M(af,i){return function(ag){return aa(af.call(this,ag),i)}}function G(i){return function(ag){var af=i.call(this,ag);return af+this.lang().ordinal(af)}}while(F.length){ac=F.pop();h[ac+"o"]=G(h[ac])}while(u.length){ac=u.pop();h[ac+ac]=M(h[ac],2)}h.DDDD=M(h.DDD,3);function t(af,i,ag){this._d=af;this._isUTC=!!i;this._a=af._a||null;this._lang=ag||false}function ae(ah){var aj=this._data={},ak=ah.years||ah.y||0,af=ah.months||ah.M||0,i=ah.weeks||ah.w||0,an=ah.days||ah.d||0,al=ah.hours||ah.h||0,ai=ah.minutes||ah.m||0,am=ah.seconds||ah.s||0,ag=ah.milliseconds||ah.ms||0;this._milliseconds=ag+am*1000+ai*60000+al*3600000;this._days=an+i*7;this._months=af+ak*12;aj.milliseconds=ag%1000;am+=W(ag/1000);aj.seconds=am%60;ai+=W(am/60);aj.minutes=ai%60;al+=W(ai/60);aj.hours=al%24;an+=W(al/24);an+=i*7;aj.days=an%30;af+=W(an/30);aj.months=af%12;ak+=W(af/12);aj.years=ak;this._lang=false}function W(i){if(i<0){return Math.ceil(i)}else{return Math.floor(i)}}function aa(ag,af){var i=ag+"";while(i.length<af){i="0"+i}return i}function T(ag,ai,ah){var af=ai._milliseconds,aj=ai._days,ak=ai._months,i;if(af){ag._d.setTime(+ag+af*ah)}if(aj){ag.date(ag.date()+aj*ah)}if(ak){i=ag.date();ag.date(1).month(ag.month()+ak*ah).date(Math.min(i,ag.daysInMonth()))}}function C(i){return Object.prototype.toString.call(i)==="[object Array]"}function S(aj,ai){var af=Math.min(aj.length,ai.length),ag=Math.abs(aj.length-ai.length),ak=0,ah;for(ah=0;ah<af;ah++){if(~~aj[ah]!==~~ai[ah]){ak++}}return ak+ag}function k(ag,al,ak,aj){var ai,ah,af=[];for(ai=0;ai<7;ai++){af[ai]=ag[ai]=(ag[ai]==null)?(ai===2?1:0):ag[ai]}ag[7]=af[7]=al;if(ag[8]!=null){af[8]=ag[8]}ag[3]+=ak||0;ag[4]+=aj||0;ah=new Date(0);if(al){ah.setUTCFullYear(ag[0],ag[1],ag[2]);ah.setUTCHours(ag[3],ag[4],ag[5],ag[6])}else{ah.setFullYear(ag[0],ag[1],ag[2]);ah.setHours(ag[3],ag[4],ag[5],ag[6])}ah._a=af;return ah}function y(ai,ag){var ah,af,aj=[];if(!ag&&O){ag=require("./lang/"+ai)}for(ah=0;ah<p.length;ah++){ag[p[ah]]=ag[p[ah]]||P.en[p[ah]]}for(ah=0;ah<12;ah++){af=X([2000,ah]);aj[ah]=new RegExp("^"+(ag.months[ah]||ag.months(af,""))+"|^"+(ag.monthsShort[ah]||ag.monthsShort(af,"")).replace(".",""),"i")}ag.monthsParse=ag.monthsParse||aj;P[ai]=ag;return ag}function x(i){var af=(typeof i==="string")&&i||i&&i._lang||null;return af?(P[af]||y(af)):X}function H(i){if(i.match(/\[.*\]/)){return i.replace(/^\[|\]$/g,"")}return i.replace(/\\/g,"")}function V(ah){var ai=ah.match(l),af,ag;for(af=0,ag=ai.length;af<ag;af++){if(h[ai[af]]){ai[af]=h[ai[af]]}else{ai[af]=H(ai[af])}}return function(aj){var i="";for(af=0;af<ag;af++){i+=typeof ai[af].call==="function"?ai[af].call(aj,ah):ai[af]}return i}}function N(af,ai){var ag=5;function ah(i){return af.lang().longDateFormat[i]||i}while(ag--&&q.test(ai)){ai=ai.replace(q,ah)}if(!m[ai]){m[ai]=V(ai)}return m[ai](af)}function f(i){switch(i){case"DDDD":return R;case"YYYY":return I;case"S":case"SS":case"SSS":case"DDD":return Q;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return J;case"Z":case"ZZ":return b;case"T":return s;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return g;default:return new RegExp(i.replace("\\",""))}}function e(aj,ah,ag,ai){var af,i;switch(aj){case"M":case"MM":ag[1]=(ah==null)?0:~~ah-1;break;case"MMM":case"MMMM":for(af=0;af<12;af++){if(x().monthsParse[af].test(ah)){ag[1]=af;i=true;break}}if(!i){ag[8]=false}break;case"D":case"DD":case"DDD":case"DDDD":if(ah!=null){ag[2]=~~ah}break;case"YY":ag[0]=~~ah+(~~ah>70?1900:2000);break;case"YYYY":ag[0]=~~Math.abs(ah);break;case"a":case"A":ai.isPm=((ah+"").toLowerCase()==="pm");break;case"H":case"HH":case"h":case"hh":ag[3]=~~ah;break;case"m":case"mm":ag[4]=~~ah;break;case"s":case"ss":ag[5]=~~ah;break;case"S":case"SS":case"SSS":ag[6]=~~(("0."+ah)*1000);break;case"Z":case"ZZ":ai.isUTC=true;af=(ah+"").match(B);if(af&&af[1]){ai.tzh=~~af[1]}if(af&&af[2]){ai.tzm=~~af[2]}if(af&&af[0]==="+"){ai.tzh=-ai.tzh;ai.tzm=-ai.tzm}break}if(ah==null){ag[8]=false}}function L(ah,al){var af=[0,0,1,0,0,0,0],ag={tzh:0,tzm:0},ak=al.match(l),ai,aj;for(ai=0;ai<ak.length;ai++){aj=(f(ak[ai]).exec(ah)||[])[0];if(aj){ah=ah.slice(ah.indexOf(aj)+aj.length)}if(h[ak[ai]]){e(ak[ai],aj,af,ag)}}if(ag.isPm&&af[3]<12){af[3]+=12}if(ag.isPm===false&&af[3]===12){af[3]=0}return k(af,ag.isUTC,ag.tzh,ag.tzm)}function A(aj,al){var ag,am=aj.match(ad)||[],ak,an=99,ai,af,ah;for(ai=0;ai<al.length;ai++){af=L(aj,al[ai]);ak=N(new t(af),al[ai]).match(ad)||[];ah=S(am,ak);if(ah<an){an=ah;ag=af}}return ag}function Z(af){var ah="YYYY-MM-DDT",ag;if(K.exec(af)){for(ag=0;ag<4;ag++){if(j[ag][1].exec(af)){ah+=j[ag][0];break}}return b.exec(af)?L(af,ah+" Z"):L(af,ah)}return new Date(af)}function U(af,ah,ag,ai,aj){var i=aj.relativeTime[af];return(typeof i==="function")?i(ah||1,!!ag,af,ai):i.replace(/%d/i,ah||1)}function E(ag,i,af){var al=ab(Math.abs(ag)/1000),ah=ab(al/60),ak=ab(ah/60),am=ab(ak/24),ai=ab(am/365),aj=al<45&&["s",al]||ah===1&&["m"]||ah<45&&["mm",ah]||ak===1&&["h"]||ak<22&&["hh",ak]||am===1&&["d"]||am<=25&&["dd",am]||am<=45&&["M"]||am<345&&["MM",ab(am/30)]||ai===1&&["y"]||["yy",ai];aj[2]=i;aj[3]=ag>0;aj[4]=af;return U.apply({},aj)}X=function(af,ah){if(af===null||af===""){return null}var ag,i;if(X.isMoment(af)){return new t(new Date(+af._d),af._isUTC,af._lang)}else{if(ah){if(C(ah)){ag=A(af,ah)}else{ag=L(af,ah)}}else{i=w.exec(af);ag=af===r?new Date():i?new Date(+i[1]):af instanceof Date?af:C(af)?k(af):typeof af==="string"?Z(af):new Date(af)}}return new t(ag)};X.utc=function(i,af){if(C(i)){return new t(k(i,true),true)}if(typeof i==="string"&&!b.exec(i)){i+=" +0000";if(af){af+=" Z"}}return X(i,af).utc()};X.unix=function(i){return X(i*1000)};X.duration=function(i,ai){var ah=X.isDuration(i),ag=(typeof i==="number"),aj=(ah?i._data:(ag?{}:i)),af;if(ag){if(ai){aj[ai]=i}else{aj.milliseconds=i}}af=new ae(aj);if(ah){af._lang=i._lang}return af};X.humanizeDuration=function(i,af,ag){return X.duration(i,af===true?null:af).humanize(af===true?true:ag)};X.version=z;X.defaultFormat=d;X.lang=function(ah,af){var ag;if(!ah){return D}if(af||!P[ah]){y(ah,af)}if(P[ah]){for(ag=0;ag<p.length;ag++){X[p[ag]]=P[ah][p[ag]]}X.monthsParse=P[ah].monthsParse;D=ah}};X.langData=x;X.isMoment=function(i){return i instanceof t};X.isDuration=function(i){return i instanceof ae};X.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(i,af,ag){if(i>11){return ag?"pm":"PM"}else{return ag?"am":"AM"}},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(af){var i=af%10;return(~~(af%100/10)===1)?"th":(i===1)?"st":(i===2)?"nd":(i===3)?"rd":"th"}});X.fn=t.prototype={clone:function(){return X(this)},valueOf:function(){return +this._d},unix:function(){return Math.floor(+this._d/1000)},toString:function(){return this._d.toString()},toDate:function(){return this._d},toArray:function(){var i=this;return[i.year(),i.month(),i.date(),i.hours(),i.minutes(),i.seconds(),i.milliseconds(),!!this._isUTC]},isValid:function(){if(this._a){if(this._a[8]!=null){return !!this._a[8]}return !S(this._a,(this._a[7]?X.utc(this._a):X(this._a)).toArray())}return !isNaN(this._d.getTime())},utc:function(){this._isUTC=true;return this},local:function(){this._isUTC=false;return this},format:function(i){return N(this,i?i:X.defaultFormat)},add:function(i,ag){var af=ag?X.duration(+ag,i):X.duration(i);T(this,af,1);return this},subtract:function(i,ag){var af=ag?X.duration(+ag,i):X.duration(i);T(this,af,-1);return this},diff:function(al,ag,an){var i=this._isUTC?X(al).utc():X(al).local(),ai=(this.zone()-i.zone())*60000,am=this._d-i._d-ai,ak=this.year()-i.year(),aj=this.month()-i.month(),ah=this.date()-i.date(),af;if(ag==="months"){af=ak*12+aj+ah/30}else{if(ag==="years"){af=ak+(aj+ah/30)/12}else{af=ag==="seconds"?am/1000:ag==="minutes"?am/60000:ag==="hours"?am/3600000:ag==="days"?am/86400000:ag==="weeks"?am/604800000:am}}return an?af:ab(af)},from:function(af,i){return X.duration(this.diff(af)).lang(this._lang).humanize(!i)},fromNow:function(i){return this.from(X(),i)},calendar:function(){var ah=this.diff(X().sod(),"days",true),ag=this.lang().calendar,af=ag.sameElse,i=ah<-6?af:ah<-1?ag.lastWeek:ah<0?ag.lastDay:ah<1?ag.sameDay:ah<2?ag.nextDay:ah<7?ag.nextWeek:af;return this.format(typeof i==="function"?i.apply(this):i)},isLeapYear:function(){var i=this.year();return(i%4===0&&i%100!==0)||i%400===0},isDST:function(){return(this.zone()<X([this.year()]).zone()||this.zone()<X([this.year(),5]).zone())},day:function(af){var i=this._isUTC?this._d.getUTCDay():this._d.getDay();return af==null?i:this.add({d:af-i})},startOf:function(i){switch(i.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return this},endOf:function(i){return this.startOf(i).add(i.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return X.utc([this.year(),this.month()+1,0]).date()},lang:function(i){if(i===r){return x(this)}else{this._lang=i;return this}}};function o(i,af){X.fn[i]=function(ag){var ah=this._isUTC?"UTC":"";if(ag!=null){this._d["set"+ah+af](ag);return this}else{return this._d["get"+ah+af]()}}}for(ac=0;ac<n.length;ac++){o(n[ac].toLowerCase(),n[ac])}o("year","FullYear");X.duration.fn=ae.prototype={weeks:function(){return W(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*86400000+this._months*2592000000},humanize:function(ah){var ai=+this,i=this.lang().relativeTime,af=E(ai,!ah,this.lang()),ag=ai<=0?i.past:i.future;if(ah){if(typeof ag==="function"){af=ag(af)}else{af=ag.replace(/%s/i,af)}}return af},lang:X.fn.lang};function a(i){X.duration.fn[i]=function(){return this._data[i]}}function c(i,af){X.duration.fn["as"+i]=function(){return +this/af}}for(ac in Y){if(Y.hasOwnProperty(ac)){c(ac,Y[ac]);a(ac.toLowerCase())}}c("Weeks",604800000);if(O){module.exports=X}if(typeof ender==="undefined"){this["moment"]=X}if(typeof define==="function"&&define.amd){define("moment",[],function(){return X})}}).call(this);(function(){(function(e,c){var b,f,a,d;d="yat";a=c.document;f={selectors:{items:null,shorttitle:null,date:null,content:null,category:null,tags:null,important:null},callbacks:{alterItems:function(g){return g},alterShorttitle:function(g){return g.text()},alterDate:function(g){return new Date(moment(g.text()))},alterContent:function(g){return g.html()},alterCategory:function(g){return g.text()},alterTags:function(g){if(g.text().length>0){return g.text().split(", ")}else{return[]}},alterImportant:function(g){return false},beforeInit:null,afterInit:null},attributes:["shorttitle","date","content","category","tags","important"]};b=(function(){var g;g=[];function h(k,j,m,l,i){this.element=k;this.containerElement=m;this.options={};this.options.selectors=e.extend({},f.selectors,j);this.options.callbacks=e.extend({},f.callbacks,l);this.options.attributes=e.extend({},f.attributes,i);this._defaults=f;this._name=d;this.init()}h.prototype.init=function(){var i;i=this;e(this.element).find(this.options.selectors.items).each(function(k,j){return i.registerChild(j)});return this.initBackbone()};h.prototype.initBackbone=function(){e(this.element).hide();return new c.yat.App({items:g,containerElement:this.containerElement})};h.prototype.registerChild=function(r){var p,k,q,m,j,o,l;j=this;m={};l=this.options.attributes;for(q in l){k=l[q];p="alter"+j.ucfirst(k);o=e(r).find(this.options.selectors[k]);if(o.length===0){o=e(r).filter(this.options.selectors[k])}if(o.length>0&&this.options.callbacks[p]!==void 0){m[k]=this.options.callbacks[p](o)}else{m[k]=void 0}}if(m.content!==void 0&&m.shorttitle!==void 0&&m.date!==void 0){return g.push(m)}};h.prototype.ucfirst=function(j){var i;j+="";return i=j.charAt(0).toUpperCase()+j.substr(1)};return h})();return e.fn[d]=function(h,i,g){return this.each(function(){if(!e.data(this,"plugin_"+d)){return e.data(this,"plugin_"+d,new b(this,h,i,g))}})}})(jQuery,window)}).call(this);(function(){window.yat=window.yat||{};window.yat.NavigationViewManager=(function(){function a(c,b){this.model=c;this.options=b;this.initialize();this.index=0}a.prototype.initialize=function(){this.paneWidth=this.options.element_width*(this.model.length/2)+this.options.margin_left+this.options.margin_right;this.startEnd=this.model.getStartEnd();this.interval=Math.abs(moment(this.startEnd.start).diff(this.startEnd.end,"days"));return this.pixelPerDay=Math.round(this.paneWidth/this.interval)};a.prototype.hasRenderCandidate=function(){return this.index<this.model.models.length};a.prototype.getNextElement=function(){var c,b;b=this.model.at(this.index++);c=moment(b.get("date")).diff(this.startEnd.start,"days");return{position:c*this.pixelPerDay+this.options.margin_left,model:b}};a.prototype.updateViewport=function(b){this.viewportPos=b};a.prototype.get_date_for_offset=function(e){var g,d,b,f,c;f=moment(this.startEnd.start).clone();b=moment(this.startEnd.end).clone();d=b.diff(f,"days");g=e/this.pixelPerDay;c=Math.round(this.viewportPos.width/this.pixelPerDay);g+=(g/(d-c))*c;return f.add("days",g)};a.prototype.get_offset_for_date=function(c){var h,f,b,g,i,e;i=moment(this.startEnd.start).clone();b=moment(this.startEnd.end).clone();f=b.diff(i,"days");e=this.viewportPos.width/this.pixelPerDay;g=moment(c).clone().diff(this.startEnd.start,"days");h=Math.round(g/(1+(e/(f-e))));return h*this.pixelPerDay};a.prototype.get_percentage_for_offset=function(d){var c,b,e;e=moment(this.startEnd.start).clone();b=moment(this.startEnd.end).clone();c=b.diff(e,"days");return d/(c*this.pixelPerDay)};a.prototype.get_offset_for_percentage=function(c){var d,b,e;e=moment(this.startEnd.start).clone();b=moment(this.startEnd.end).clone();d=b.diff(e,"days");return d*this.pixelPerDay*c};return a})()}).call(this);(function(){window.yat=window.yat||{};window.yat.templates={timelineContainer:_.template('<div class="yat-timeline"><div class="yat-timeline-inner1"></div></div>'),timelineFullScreen:_.template('<a class="yat-fullscreen-start">Zur Vollansicht wechseln.</a>'),timelineFullScreenEnd:_.template('<a class="yat-fullscreen-end">Zur Normalansicht wechseln.</a>'),timelineViewportElementList:_.template('<div class="yat-inner"><ol class="yat-elements"></ol></div>'),timelineViewportElement:_.template('<div class="yat-element-inner"><div class="yat-element-inner2"><%= content %></div></div><span class="arrow"></span>'),timelineViewportReadMore:_.template('<span class="yat-readmore">Mehr lesen</span>'),timelineViewportNavlinks:_.template('<div class="yat-navlinks"><span class="yat-left"><a href="javascript:void(0);">Nach links navigieren</a></span><span class="yat-right"><a href="javascript:void(0);">Nach rechts navigieren</a></span></div>'),timelineOverview:_.template('<ol class="yat-years"></ol>'),timelineOverviewYear:_.template('<li style="width: <%= width %>;"><span><%= year %></span></li>'),timelineOverviewSelection:_.template('<div class="yat-current-position"><div class="yat-position-container"><div class="yat-position-inner">Aktueller Ausschnitt</div></div></div>'),timelineNavigation:_.template('<div class="yat-navigation"></div>'),timelineNavigationElementList:_.template('<ol class="yat-elements"></ol>'),timelineNavigationElement:_.template('<a href="<%= linkHref %>"><%= shorttitle %></a>'),timelineNavigationNavlinks:_.template('<div class="yat-navlinks"><span class="yat-left"><a href="javascript:void(0);">In der Navigation nach links navigieren</a></span><span class="yat-right"><a href="javascript:void(0);">In der Navigation nach rechts navigieren</a></span></div>'),timelineNavigationPlaceholder:_.template('<li class="yat-navigation-placeholder-right"></li>')}}).call(this);(function(){var a={}.hasOwnProperty,b=function(f,d){for(var c in d){if(a.call(d,c)){f[c]=d[c]}}function e(){this.constructor=f}e.prototype=d.prototype;f.prototype=new e();f.__super__=d.prototype;return f};window.yat=window.yat||{};window.yat.OverviewView=(function(c){b(d,c);function d(){return d.__super__.constructor.apply(this,arguments)}d.prototype.className="yat-timeline-overview";d.prototype.options={animation_duration:200};d.prototype.selection_element=void 0;d.prototype.current_date=void 0;d.prototype.initialize=function(){this.scrollLeft=0;return this.render()};d.prototype.render=function(){var r,n,e,q,f,s,m,o,l,j,i,p,k,h,g;m=this;s=$(window.yat.templates.timelineOverview());l=(function(){g=[];for(var u=k=this.model.start.getFullYear(),t=this.model.end.getFullYear();k<=t?u<=t:u>=t;k<=t?u++:u--){g.push(u)}return g}).apply(this);r=moment(this.model.end).clone().diff(moment(this.model.start),"days")+1;for(i=0,p=l.length;i<p;i++){o=l[i];f=_.max([moment([o]),moment(this.model.start)],function(t){return t.valueOf()});q=_.min([moment([o,11,31]),moment(this.model.end)],function(t){return t.valueOf()});e=q.diff(f,"days")+1;n=100/(r/e);s.append(window.yat.templates.timelineOverviewYear({year:o,width:n+"%"}))}this.selection_element=$(window.yat.templates.timelineOverviewSelection());setTimeout((function(){var t;t=parseInt(m.selection_element.find(".yat-position-inner").width(),10);m.selection_element.find(".yat-position-container").css("width","100%");m.selection_element.find(".yat-position-container").css("padding-left","100%");m.selection_element.find(".yat-position-container").css("padding-right",t/2);m.selection_element.find(".yat-position-container").css("left",-t/2);return m.jump_to(moment(m.model.start))}),10);m.selection_element.find(".yat-position-container").bind("resize",(function(){return m.jump_to(m.current_date)}));this.$el.html(s);this.$el.append(this.selection_element);this.selection_element.parent().bind("mouseup",function(t){return m.options.dispatcher.trigger("overview_jump_to",m.get_date_for_offset(t.pageX-$(".yat-current-position").offset().left))});m.options.dispatcher.on("overview_jump_to",function(){var t;t=true;if(arguments.length>1){t=arguments[1]}return m.jump_to(arguments[0],t)});this.$el.find(".yat-current-position").scroll(function(){var t;t=m.get_percentage_for_offset($(this).scrollLeft());if(m.scrollLeft!==$(this).scrollLeft()){return m.options.dispatcher.trigger("overview_position_change",t)}});return this.options.dispatcher.on("navigation_position_change",function(t){return m.jump_to_percentage(t,false)})};d.prototype.jump_to_percentage=function(e,f){var h,g;h=this.get_offset_for_percentage(e);g=$(".yat-current-position").width();this.scrollLeft=Math.floor(g-h);if(f){return this.$el.find(".yat-current-position").animate({scrollLeft:g-h},this.options.animation_duration)}else{return this.$el.find(".yat-current-position").scrollLeft(g-h)}};d.prototype.jump_to=function(f,e){var h,g;h=this.get_offset_for_date(f);g=$(".yat-current-position").width();if(e){this.$el.find(".yat-current-position").animate({scrollLeft:g-h},this.options.animation_duration)}else{this.$el.find(".yat-current-position").scrollLeft(g-h)}return this.current_date=f};d.prototype.get_percentage_for_offset=function(f){var e;e=$(".yat-current-position").width();return 1-(f/e)};d.prototype.get_offset_for_percentage=function(e){var f;f=$(".yat-current-position").width();return e*f};d.prototype.get_offset_for_date=function(f){var e,h,g;f.startOf("day");g=$(".yat-current-position").width();h=moment(this.model.start);e=moment(this.model.end);return(f.diff(h)/e.diff(h))*g};d.prototype.get_date_for_offset=function(g){var e,h,f;f=$(".yat-current-position").width();h=moment(this.model.start);e=moment(this.model.end);return moment(h).add(e.diff(h)*(g/f)).startOf("day")};return d})(Backbone.View)}).call(this);(function(){var a={}.hasOwnProperty,b=function(f,d){for(var c in d){if(a.call(d,c)){f[c]=d[c]}}function e(){this.constructor=f}e.prototype=d.prototype;f.prototype=new e();f.__super__=d.prototype;return f};window.yat=window.yat||{};window.yat.viewportItemView=(function(c){b(d,c);function d(){return d.__super__.constructor.apply(this,arguments)}d.prototype.tagName="li";d.prototype.initialize=function(){this.inDom=false;return this.render()};d.prototype.render=function(){var e;this.inDom=true;this.$el.html(window.yat.templates.timelineViewportElement(this.model.toJSON()));e=this;if(e.model.get("important")){e.$el.addClass("important")}return setTimeout((function(){if($(e.$el).find(".yat-element-inner2").height()>($(e.$el).find(".yat-element-inner").height()-10)){e.$el.addClass("overflow");return e.$el.append(window.yat.templates.timelineViewportReadMore)}}))};return d})(Backbone.View)}).call(this);(function(){var a={}.hasOwnProperty,b=function(f,d){for(var c in d){if(a.call(d,c)){f[c]=d[c]}}function e(){this.constructor=f}e.prototype=d.prototype;f.prototype=new e();f.__super__=d.prototype;return f};window.yat=window.yat||{};window.yat.ViewportView=(function(e){var d,c;b(f,e);function f(){return f.__super__.constructor.apply(this,arguments)}f.prototype.className="yat-viewport";f.prototype.total_index=0;f.prototype.current_scroll_position=0;f.prototype.options={animation_duration:200,initial_element_count:4,id_prefix:""};d=false;f.prototype.not_rendered_yet={};f.prototype.not_rendered_yet_position=0;f.prototype.not_rendered_yet_current_element=void 0;c=0;f.prototype.initialize=function(){return this.render()};f.prototype.remove=function(){return Backbone.View.prototype.remove.call(this)};f.prototype.render=function(){var i,h,g;h=this;h.options.dispatcher.trigger("load_component_start");g=$(window.yat.templates.timelineViewportElementList());i=$(window.yat.templates.timelineViewportNavlinks());this.$el.html(g);this.$el.append(i);this.total_index=this.model.length;_(this.total_index).times(function(j){return h.not_rendered_yet[j]=false});setTimeout((function(){h.$el.find("ol.yat-elements").css("width",0);return _.times(h.options.initial_element_count,(function(){h.insert_next_element();return h.options.dispatcher.trigger("load_component_end")}))}),10);return this.registerEventListener()};f.prototype.registerEventListener=function(){var g;g=this;this.$el.find("> .yat-inner").bind("touchmove",function(){return g.options.dispatcher.trigger("viewport_position_change",direction)});this.$el.find("> .yat-inner").scroll(function(){var h;h="left";if(g.current_scroll_position<g.$el.find("> .yat-inner").scrollLeft()){h="right"}g.current_scroll_position=g.$el.find("> .yat-inner").scrollLeft();return g.options.dispatcher.trigger("viewport_position_change",h)});this.$el.find("> .yat-inner").bind("scrollstart",function(){return g.options.dispatcher.trigger("viewport_scrollstart")});this.$el.find("> .yat-inner").bind("scrollstop",function(){return g.options.dispatcher.trigger("viewport_scrollstop",g.getCurrentElementModels())});this.$el.find(".yat-navlinks .yat-left a").click(function(){g.options.dispatcher.trigger("viewport_prev");return g.options.dispatcher.trigger("viewport_item_deselect")});this.$el.find(".yat-navlinks .yat-right a").click(function(){g.options.dispatcher.trigger("viewport_next");return g.options.dispatcher.trigger("viewport_item_deselect")});g.options.dispatcher.on("viewport_jump_to",function(){return g.jump_to(arguments[0],arguments[1])});g.options.dispatcher.on("viewport_prev",function(){var h;h=_.first(g.getCurrentElements()).prev();g.insert_prev_element(g.getCurrentElements().length+2);g.disable_load_more_till_scrollend=true;return g.options.dispatcher.trigger("viewport_jump_to",h)});g.options.dispatcher.on("viewport_next",function(){var h;h=_.last(g.getCurrentElements()).next();g.insert_next_element(g.getCurrentElements().length+2);g.disable_load_more_till_scrollend=true;return g.options.dispatcher.trigger("viewport_jump_to",h)});g.options.dispatcher.on("viewport_item_select",function(){return g.open_element(arguments[0])});g.options.dispatcher.on("viewport_item_deselect",function(){return g.close_open_element(arguments[0])});g.options.dispatcher.on("viewport_position_change",function(){return g.load_more(arguments[0])});g.options.dispatcher.on("viewport_scrollstop",function(){return g.disable_load_more_till_scrollend=false});return g.options.dispatcher.on("navigation_element_selected",function(i){var h;h=_.indexOf(g.model.models,i.model);if(g.not_rendered_yet[h]===false){g.insert_element_at_position(h);g.insert_prev_element(g.getCurrentElements().length+2);g.insert_next_element(g.getCurrentElements().length+2)}g.disable_load_more_till_scrollend=true;g.jump_to($("#"+g.options.id_prefix+i.model.cid));this.not_rendered_yet_current_element=$("#"+g.options.id_prefix+i.model.cid);return this.not_rendered_yet_position=h})};f.prototype.getCurrentElements=function(){var h,i,g,j;g=this.$el.find("> .yat-inner").scrollLeft();j=g+this.$el.find("> .yat-inner").width();h=[];i=[];this.$el.find("ol.yat-elements").children().each(function(){var k;k=$(this).outerWidth()+parseInt($(this).css("margin-left"),10)+parseInt($(this).css("margin-right"),10);if($(this).position().left>=g&&($(this).position().left+k)<=j){i.push($(this))}if($(this).position().left>=g-k&&($(this).position().left+k)<=j+k){h.push($(this))}if($(this).position().left>j){return false}});if(i.length>0){return i}else{return h}};f.prototype.getCurrentElement=function(){var h,g;h=this.getCurrentElements();g=parseInt(h.length/2,10);return h[g]};f.prototype.getCurrentElementModels=function(){var h,g;g=this;h=[];_.each(this.getCurrentElements(),(function(i){return h.push({dom:i,model:g.model.get(i.attr("id").substr(g.options.id_prefix.length))})}));return h};f.prototype.find_next_not_rendered_element=function(){var g;g=this.not_rendered_yet_position;while(g<this.total_index){if(this.not_rendered_yet[g]===false){return g}g++}return this.total_index};f.prototype.find_prev_not_rendered_element=function(){var g;g=this.not_rendered_yet_position;while(g>=0){if(this.not_rendered_yet[g]===false){return g}g--}return 0};f.prototype.insert_next_element=function(h){var g;g=this;if(h===void 0){h=1}return _(h).times(function(){var j,i;i=g.find_next_not_rendered_element();if(i>0){j=jQuery("#"+g.options.id_prefix+(g.model.at(i-1)).cid)}else{j=void 0}return g.insert_element_at_position(i,void 0,j)})};f.prototype.insert_prev_element=function(h){var g;g=this;if(h===void 0){h=1}return _(h).times(function(){var j,i;i=g.find_prev_not_rendered_element();if(i<=g.total_index){j=jQuery("#"+g.options.id_prefix+(g.model.at(i+1)).cid)}else{j=void 0}return g.insert_element_at_position(i,j,void 0)})};f.prototype.insert_element_at_position=function(g,m,n){var j,i,l,h,k;if(this.not_rendered_yet[g]===false){k=this;h=this.model.at(g);l=new window.yat.viewportItemView({model:h});i=null;if(m!==void 0&&m[0]!==void 0){m.before(l.$el);i=m.prev();this.$el.find("> .yat-inner").scrollLeft(this.$el.find("> .yat-inner").scrollLeft()+this.element_width(i))}else{if(n!==void 0&&n[0]!==void 0){n.after(l.$el);i=n.next()}else{j=this.$el.find("ol.yat-elements").append(l.$el);i=j.children().last()}}i.attr("id",this.options.id_prefix+h.cid);this.change_list_width(this.element_width(i));i.click(function(){if($(this).hasClass("overflow")){if($(this).hasClass("open")){return k.options.dispatcher.trigger("viewport_item_deselect")}else{return k.options.dispatcher.trigger("viewport_item_select",$(this))}}});i.data("yat-position",g);this.not_rendered_yet[g]=true;this.not_rendered_yet_position=g;this.not_rendered_yet_current_element=i;return c++}};f.prototype.load_more=function(g){if(c<this.total_index&&!this.disable_load_more_till_scrollend){if(g==="left"){this.insert_prev_element()}else{this.insert_next_element()}return true}return false};f.prototype.jump_to=function(){var g,i,h;if(arguments[0][0]!==void 0){i=this.$el.find("> .yat-inner").outerWidth();h=arguments[0].outerWidth()+parseInt(arguments[0].css("margin-left"),10)+parseInt(arguments[0].css("margin-right"),10);g=arguments[2];if(arguments[1]!==void 0&&arguments[1]===false){this.$el.find("> .yat-inner").scrollLeft(arguments[0].position().left-(i/2-h/2))}else{this.$el.find("> .yat-inner").animate({scrollLeft:arguments[0].position().left-(i/2-h/2)},{duration:this.options.animation_duration,complete:function(){if(g!==void 0){return g()}}})}this.not_rendered_yet_position=arguments[0].data("yat-position");return this.not_rendered_yet_current_element=arguments[0]}};f.prototype.open_element=function(){var g,j,i,h;h=this;this.close_open_element();g=arguments[0];i=this.element_width(g);g.addClass("open");j=this.element_width(g);this.change_list_width(j-i,true);this.disable_load_more_till_scrollend=true;return this.jump_to(g,true,(function(){return this.disable_load_more_till_scrollend=false}))};f.prototype.close_open_element=function(){var g,j,i,h;h=this;if(this.$el.find("ol.yat-elements li.open").length>0){g=this.$el.find("ol.yat-elements li.open").first();i=this.element_width(g);this.$el.find("ol.yat-elements li.open").removeClass("open");j=this.element_width(g);return this.change_list_width(j-i,true)}};f.prototype.element_width=function(g){return g.outerWidth()+parseInt(g.css("margin-left"),10)+parseInt(g.css("margin-right"),10)};f.prototype.change_list_width=function(g){g=parseInt(this.$el.find("ol.yat-elements").css("width"),10)+g;return this.$el.find("ol.yat-elements").css("width",g)};return f})(Backbone.View)}).call(this);(function(){var a={}.hasOwnProperty,b=function(f,d){for(var c in d){if(a.call(d,c)){f[c]=d[c]}}function e(){this.constructor=f}e.prototype=d.prototype;f.prototype=new e();f.__super__=d.prototype;return f};window.yat=window.yat||{};window.yat.NavigationElementView=(function(c){b(d,c);function d(){return d.__super__.constructor.apply(this,arguments)}d.prototype.tagName="li";d.prototype.events={click:function(){this.options.dispatcher.trigger("navigation_element_selected",this);return false}};d.prototype.initialize=function(){return this.render()};d.prototype.render=function(){this.$el.append(window.yat.templates.timelineNavigationElement({shorttitle:this.model.get("shorttitle"),linkHref:"#"}));if(this.model.get("category")!==void 0){return this.$el.addClass("cat-"+this.model.get("category"))}};d.prototype.width=function(){return this.$el.width()};return d})(Backbone.View)}).call(this);(function(){var c,a,e,b={}.hasOwnProperty,d=function(i,g){for(var f in g){if(b.call(g,f)){i[f]=g[f]}}function h(){this.constructor=i}h.prototype=g.prototype;i.prototype=new h();i.__super__=g.prototype;return i};window.yat=window.yat||{};e={left:0,right:0};a=[];c=[];window.yat.NavigationView=(function(f){var h;d(g,f);function g(){return g.__super__.constructor.apply(this,arguments)}g.prototype.options={position:{top:"2.5"},id_prefix:"",id_postfix:"",vertical_offset:5,horizontal_offset:5,navigation_height:100,margin_left:30,margin_right:30};h=void 0;g.prototype.className="yat-navigation";g.prototype.initialize=function(){var i;this.options.dispatcher.trigger("load_component_start");this.viewManager=new window.yat.NavigationViewManager(this.model,{element_width:200,margin_left:this.options.margin_left,margin_right:this.options.margin_right});this.elementList=$(window.yat.templates.timelineNavigationElementList());this.mainElement=$("<div class='yat-inner' />");this.mainElement.append(this.elementList);this.navigation_width=0;i=$(window.yat.templates.timelineNavigationNavlinks());this.$el.html(this.mainElement);this.$el.append(i);this.registerEventListener();return this.render()};g.prototype._updateViewportPos=function(){var i;i=this.mainElement.scrollLeft();e={left:i,right:i+this.mainElement.width(),width:this.mainElement.width()};return this.viewManager.updateViewport(e)};g.prototype.offset_to_percentage=function(i){return i/(this.navigation_width-this.mainElement.width()-this.options.horizontal_offset+this.options.margin_right)};g.prototype.percentage_to_offset=function(i){return i*(this.navigation_width-this.mainElement.width()-this.options.horizontal_offset+this.options.margin_right)};g.prototype.registerEventListener=function(){var i,j;j=this;i=j.model.getStartEnd();this.mainElement.bind("touchmove",function(){return j.options.dispatcher.trigger("navigation_position_change",j.viewManager.get_date_for_offset(j.mainElement.scrollLeft()))});this.mainElement.scroll(function(){var k;k=j.mainElement.scrollLeft();j.scrollOffset=k;return j.options.dispatcher.trigger("navigation_position_change",j.offset_to_percentage(k))});this.options.dispatcher.on("viewport_scrollstop",function(l){var k;j.activate_elements(l);if(_.first(arguments[0]).model.get("date")===i.start){return j.jump_to_cid(_.first(arguments[0]).model.cid,true)}else{if(_.last(arguments[0]).model.get("date")===i.end){return j.jump_to_cid(_.last(arguments[0]).model.cid,true)}else{if(arguments[0].length%2!==0){k=(arguments[0].length-1)/2}else{k=arguments[0].length/2}return j.jump_to_cid(arguments[0][k].model.cid,true)}}});this.options.dispatcher.on("navigation_position_change",function(){return j._updateViewportPos()});this.options.dispatcher.on("overview_position_change",function(k){return j.jump_to_percentage(k,false)});this.$el.find(".yat-navlinks .yat-left a").click(function(){return j.options.dispatcher.trigger("navigation_prev")});this.$el.find(".yat-navlinks .yat-right a").click(function(){return j.options.dispatcher.trigger("navigation_next")});this.options.dispatcher.on("navigation_prev",function(){var k,m,l;k=j.offset_to_percentage(j.mainElement.scrollLeft());m=(j.elementList.parent().width()/j.viewManager.paneWidth)/2;l=k-m;return j.jump_to_percentage(l,true)});return this.options.dispatcher.on("navigation_next",function(){var k,m,l;k=j.offset_to_percentage(j.mainElement.scrollLeft());m=(j.elementList.parent().width()/j.viewManager.paneWidth)/2;l=k+m;return j.jump_to_percentage(l,true)})};g.prototype.render=function(){var l,k,i,j;j=this;this._updateViewportPos();l=[];i;while(this.viewManager.hasRenderCandidate()){k=this.viewManager.getNextElement();k.view=this.renderMore(k);if(k.model.get("date")<=moment()){i=k}l.push(k)}this.placeholder_right=$(window.yat.templates.timelineNavigationPlaceholder());this.placeholder_right.css("width",this.options.margin_right);this.elementList.append(this.placeholder_right);if(i!=null){window.setTimeout(function(){return j.options.dispatcher.trigger("navigation_element_selected",i.view)},0)}return this.repositionElements(l)};g.prototype.renderMore=function(k){var i,j;j=this;i=new window.yat.NavigationElementView({model:k.model,dispatcher:j.options.dispatcher});i.$el.attr("id",this.options.id_prefix+k.model.cid+this.options.id_postfix);this.elementList.append(i.$el);return i};g.prototype.repositionElements=function(j){var i;i=this;this.line=this.options.margin_left;this.current_objects=[];return window.setTimeout(function(){var m,n,l,k;k=[];for(n=0,l=j.length;n<l;n++){m=j[n];this.callIndex=0;k.push(i.arrange_element(m))}return k},10)};g.prototype.arrange_element=function(i){var k,l,j;j=this;l=false;if(!i.pos){i.pos={left:i.position,top:0,height:parseInt(i.view.$el.height(),10),width:parseInt(i.view.$el.width(),10)}}i.pos.nextLeft=function(){return this.left+this.width+j.options.horizontal_offset};i.pos.nextTop=function(){return this.top+this.height+j.options.vertical_offset};if(i.pos.left>this.line){this.line=i.pos.left}this.cleanup_current_objects();if(this.current_objects.length===0){i.pos.top=0;l=true}else{k=_.min(this.current_objects,function(m){return m.pos.nextLeft()});if(k!=null){k=k.pos.nextLeft()}this.current_objects=_.sortBy(this.current_objects,function(m){return m.pos.top});i.pos.left=this.line;i.pos.top=0;if(this.position_is_valid(this.current_objects,i.pos)){l=true}else{_.each(this.current_objects,function(m){var n;n=_.clone(i.pos);n.left=this.line;n.top=m.pos.nextTop();if(this.position_is_valid(this.current_objects,n)){i.pos.left=n.left;i.pos.top=n.top;return l=true}},this)}}if(l){this.current_objects.push(i);this.current_objects=_.uniq(this.current_objects);i.view.$el.css("left",i.pos.left+"px");i.view.$el.css("top",i.pos.top+"px");this.placeholder_right.css("left",i.pos.left+i.pos.width);return this.navigation_width=i.pos.nextLeft()}else{if(k>this.line){this.line=k}else{this.line+=this.options.horizontal_offset}this.cleanup_current_objects();i.pos.top=0;i.pos.left=this.line;return this.arrange_element(i)}};g.prototype.position_is_valid=function(k,j){var i;if(j.nextTop()<this.options.navigation_height+this.options.vertical_offset){i=!_.some(k,function(l){return l.pos.left<j.nextLeft()&&j.left<l.pos.nextLeft()&&l.pos.top<j.nextTop()&&j.top<l.pos.nextTop()});return i}else{return false}};g.prototype.cleanup_current_objects=function(){var i;i=this.current_objects.length;return this.current_objects=_.reject(this.current_objects,function(j){return j.pos.nextLeft()<=this.line},this)};g.prototype.jump_to_percentage=function(i,j){var k;k=this.viewManager.get_offset_for_percentage(i);k=this.percentage_to_offset(i);if(j){return this.mainElement.animate({scrollLeft:k},this.options.animation_duration)}else{return this.mainElement.scrollLeft(k)}};g.prototype.jump_to=function(j,i){var k;k=this.viewManager.get_offset_for_date(j);if(i){return this.mainElement.animate({scrollLeft:k},this.options.animation_duration)}else{return this.mainElement.scrollLeft(k)}};g.prototype.jump_to_cid=function(l,i){var k,j;k=this.get_element_by_cid(l);if(k[0]!==void 0){j=k.position().left+k.width()/2-this.$el.outerWidth()/2;if(i){return this.mainElement.animate({scrollLeft:j},this.options.animation_duration)}else{return this.mainElement.scrollLeft(j)}}};g.prototype.get_element_by_cid=function(i){return $("#"+this.options.id_prefix+i+this.options.id_postfix)};g.prototype.activate_elements=function(i){_.each(c,function(j){return j.removeClass("active")});c=[];return _.each(i,function(j){var k;k=this.get_element_by_cid(j.model.cid).find("a");k.addClass("active");return c.push(k)},this)};return g})(Backbone.View)}).call(this);(function(){var a={}.hasOwnProperty,b=function(f,d){for(var c in d){if(a.call(d,c)){f[c]=d[c]}}function e(){this.constructor=f}e.prototype=d.prototype;f.prototype=new e();f.__super__=d.prototype;return f};window.yat=window.yat||{};window.yat.TimelineView=(function(c){b(d,c);function d(){return d.__super__.constructor.apply(this,arguments)}d.prototype.className="yat-inner";d.prototype.options={id_prefix:""};d.prototype.fullscreen_placeholder=void 0;d.prototype.fullscreen_button=void 0;d.prototype.fullscreen_button_end=void 0;d.prototype.compontent_load_counter=0;d.prototype.initialize=function(){return this.render()};d.prototype.render=function(){var e;e=this;this.container=$(window.yat.templates.timelineContainer());this.container.addClass("loading");e.options.dispatcher.on("load_component_start",function(){return e.compontent_load_counter++});e.options.dispatcher.on("load_component_end",function(){e.compontent_load_counter--;if(e.compontent_load_counter<=0){return e.container.removeClass("loading")}});this.$el.append(e.container);return window.setTimeout((function(){e.options.id_prefix="table"+_.random(0,1000);e.viewport=new window.yat.ViewportView({model:e.model,dispatcher:e.options.dispatcher,id_prefix:e.options.id_prefix});e.overview=new window.yat.OverviewView({model:e.model.getStartEnd(),dispatcher:e.options.dispatcher});e.navigation=new window.yat.NavigationView({model:e.model,dispatcher:e.options.dispatcher,id_prefix:e.options.id_prefix,id_postfix:"navigation"});e.navigation.$el.append(e.overview.$el);e.container.children(".yat-timeline-inner1").append(e.navigation.$el);e.container.children(".yat-timeline-inner1").append(e.viewport.$el);e.fullscreen_button=$(window.yat.templates.timelineFullScreen());e.fullscreen_button_end=$(window.yat.templates.timelineFullScreenEnd());e.fullscreen_button_end.hide();e.fullscreen_button.click(function(){return e.options.dispatcher.trigger("fullscreen_start")});e.fullscreen_button_end.click(function(){return e.options.dispatcher.trigger("fullscreen_end")});e.options.dispatcher.on("fullscreen_start",function(){return e.fullscreen_start()});e.options.dispatcher.on("fullscreen_end",function(){return e.fullscreen_end()});e.container.append(e.fullscreen_button);return e.container.append(e.fullscreen_button_end)}),1)};d.prototype.fullscreen_start=function(){var e,g,f;f=this;g=f.viewport.getCurrentElement();f.$el.after('<div class="yat-fullscreen-placeholder" style="display:none" />');f.fullscreen_placeholder=f.$el.next();e=$('<div class="yat-fullscreen" id="yat-fullscreen-'+f.options.id_prefix+'" />');$("body").append(e);e.append(f.$el);f.viewport.insert_prev_element(f.viewport.getCurrentElements().length+2);f.viewport.insert_next_element(f.viewport.getCurrentElements().length+2);f.viewport.disable_load_more_till_scrollend=true;f.viewport.jump_to(g,true,(function(){return f.viewport.disable_load_more_till_scrollend=false}));f.fullscreen_button_end.show();return f.fullscreen_button.hide()};d.prototype.fullscreen_end=function(){var f,e;e=this;f=e.viewport.getCurrentElement();e.fullscreen_placeholder.after(e.$el);$("#yat-fullscreen-"+e.options.id_prefix).remove();e.fullscreen_placeholder.remove();e.viewport.insert_prev_element(e.viewport.getCurrentElements().length+2);e.viewport.insert_next_element(e.viewport.getCurrentElements().length+2);e.viewport.disable_load_more_till_scrollend=true;e.viewport.jump_to(f,true,(function(){return e.viewport.disable_load_more_till_scrollend=false}));e.fullscreen_button_end.hide();return e.fullscreen_button.show()};return d})(Backbone.View)}).call(this);(function(){var a={}.hasOwnProperty,b=function(f,d){for(var c in d){if(a.call(d,c)){f[c]=d[c]}}function e(){this.constructor=f}e.prototype=d.prototype;f.prototype=new e();f.__super__=d.prototype;return f};window.yat=window.yat||{};window.yat.Item=(function(c){b(d,c);function d(){return d.__super__.constructor.apply(this,arguments)}d.prototype.defaults={category:"",content:"",date:"",important:false,shorttitle:"",tags:[]};return d})(Backbone.Model)}).call(this);(function(){var a={}.hasOwnProperty,b=function(f,d){for(var c in d){if(a.call(d,c)){f[c]=d[c]}}function e(){this.constructor=f}e.prototype=d.prototype;f.prototype=new e();f.__super__=d.prototype;return f};window.yat=window.yat||{};window.yat.ItemList=(function(d){b(c,d);function c(){return c.__super__.constructor.apply(this,arguments)}c.prototype.model=yat.Item;c.prototype.comparator=function(e){return e.get("date")};c.prototype.getStartEnd=function(){return{start:this.at(0).get("date"),end:this.at(this.length-1).get("date")}};return c})(Backbone.Collection)}).call(this);(function(){window.yat=window.yat||{};window.yat.App=(function(){function a(b){this.dispatcher=_.extend({},Backbone.Events);this.dispatcher.on("all",function(){});this.items=new window.yat.ItemList(b.items);this.timelineView=new window.yat.TimelineView({el:b.containerElement,model:this.items,dispatcher:this.dispatcher})}return a})()}).call(this);